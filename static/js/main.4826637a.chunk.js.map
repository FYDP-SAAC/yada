{"version":3,"sources":["images/logo.png","images/darkLogo.png","images/graphic.png","util/FetchWithTimeout.js","reducers/BackendModeSignedInStatus.js","components/LandingPage.js","util/FileIdAndTypeUtils.js","util/ConvertStrValueOrDefault.js","reducers/CurrentOpenFileState.js","reducers/SetTagsInView.js","reducers/Toast.js","store.js","editor_extension/plugins/SelectNode.js","editor_extension/plugins/TagFiltering.js","editor_extension/plugins/CancelLineBreaks.js","editor_extension/BlockTagging.js","components/TagMenu.js","components/Editor.js","backend/LocalFileStorageSystemClient.js","backend/HostedFileStorageSystemClient.js","backend/FileStorageSystemClient.js","components/SourceEditorWithTagFiltersInput.js","components/Navigator.js","lib/TagFiltersGrammar.js","components/Navbar.js","components/CardView/Card.js","components/CardView/StudyView.js","components/ViewComponents/DragDropColumn.js","components/ViewComponents/TagEditor.js","components/CardView/CardDeck.js","components/TextView/TextView.js","components/ViewEditor.js","components/EditorManager.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","fetchWithTimeout","uri","options","a","time","controller","AbortController","setTimeout","abort","fetch","signal","then","response","ok","console","log","SERVER_BASE_URL","BACKEND_MODE_SIGNED_IN_STATUS","USER_SIGNED_IN","USER_SIGNED_OUT","LOCAL_STORAGE","getUserSignedInStatus","token","Cookies","get","headers","Headers","setBackendModeSignedInStatusAction","status","type","CLIENT_ID","LandingPage","handleLoginSuccess","profileObj","name","email","tokenObj","id_token","expiry","expiresAt","axios","post","method","body","JSON","stringify","withCredentials","set","expires","Date","props","dispatchSetBackendModeSignedInStatusAction","render","style","display","flexFlow","height","overflow","className","flexGrow","AppBar","position","class","Toolbar","src","require","width","marginRight","alt","backgroundColor","flex","Grid","container","spacing","alignItems","item","xs","marginLeft","Typography","variant","fontFamily","color","text","speed","clientId","buttonText","onSuccess","onFailure","cookiePolicy","responseType","float","Button","onClick","React","Component","connect","state","backendModeSignedInStatus","dispatch","mode","FILE_TYPE","SOURCE","TEXT_VIEW","CARD_VIEW","EMPTY","NO_OPEN_FILE_ID","sourceId","viewId","viewType","validateFileIdObj","fileId","hasOwnProperty","validateHasFileIdObj","validateHasFileNameObj","fileName","checkNoOpenFileId","checkSourceFileId","checkViewFileId","getFileIdKeyStr","convertStrValueOrDefault","valueStr","defaultValue","failureMessage","convertFromString","parse","value","e","convertStrValueOrDefaultIfFalsy","storedInitialFileId","localStorage","getItem","storedInitialFileName","initialFileId","initialFileName","sourceName","viewName","setCurrentOpenFileIdAction","setCurrentOpenFileNameAction","setSelectNodeAction","selectNode","setTagsInViewAction","tagsInView","setToastAction","toast","TOAST_SEVERITY","DEFAULT_STATE","message","severity","open","configureStore","reducer","combineReducers","currentOpenFileId","action","currentOpenFileName","saveDirtyFlag","setItem","removeItem","SelectNodePluginKey","PluginKey","Plugin","key","init","apply","tr","_value","oldState","head","selection","newState","doc","nodesBetween","node","pos","attrs","eq","store","decorations","selectDecorations","getState","push","Decoration","nodeSize","DecorationSet","create","TagFilteringPluginKey","evaluateTagFilters","tagFilters","parentTags","match","taggable","nodeTags","matchTagFilters","tags","Array","isArray","length","match1","isTextblock","cumulativeChildSize","i","childCount","child","childMatch","v","val","getMeta","undefined","filterDecorations","CancelLineBreaksPluginKey","filterTransaction","steps","every","step","toJSON","stepType","slice","content","some","isLeaf","checkInsertLineBreakReplaceStep","from","to","fromNode","nodeAt","toNode","checkRemoveLineBreakReplaceStep","CancelLineBreaksPlugin","SelectNodePlugin","TagFilteringPlugin","Extension","TAG_VALUE_REGEX","INVALID_TAG_VALUE_REGEX","TagListItem","Chip","label","tagValue","onDelete","event","handleEditMenuClick","deleteIcon","justifyContent","TagMenu","selectNodeAttrs","modifying","editMenuAnchorElement","renamePopoverElement","currentTag","handleAddTag","tag","document","getElementById","trim","test","dispatchSetToastAction","newSelectNodeAttrs","uuidv4","BlockTaggingEditorExtension","editor","view","setNodeMarkup","setState","dispatchSetSaveDirtyFlagAction","handleDeleteTag","handleEditMenuClose","handleModifyTagValue","newTagValue","componentDidUpdate","prevProps","defer","currentTarget","handleRenameMenuClick","handleRenamePopoverClose","id","OutlinedInput","title","placeholder","disabled","onKeyPress","target","preventDefault","onKeyDown","focus","endAdornment","InputAdornment","IconButton","aria-label","edge","margin","Object","keys","List","component","aria-labelledby","subheader","ListSubheader","map","ListItem","dense","Menu","anchorEl","keepMounted","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","ListItemIcon","fontSize","ListItemText","primary","Popover","Input","autoFocus","onBlur","blur","disableUnderline","fullWidth","Editor","noOpenFileIdCheck","hidden","extensions","fileIdKeyStr","fileContent","jsonStrValue","setSelection","TextSelection","onChange","doSetLocalStorageSourceViews","sourceViews","doGetLocalStorageSourceViews","doSetLocalStorageSourceIdNames","sourceIdNames","calculateLocalStorageNextNewId","existingIdsDict","candidate","toString","calculateLocalStorageNextNewFileIds","filesList","source","nextNewViewIdsForSourceIds","fromEntries","entries","views","doGetFilesList","doSaveViewSpec","tagsList","createNew","viewSpecLocalStorageKey","doGetView","doGetSourceTaggedBlocks","sourceContentDocStr","sourceContentDoc","sourceTaggedBlocks","nodes","shift","tagId","doSaveSourceContent","saveValue","sourceContentLocalStorageKey","doGetSourceContent","doSetSourceSavedTagFilters","sourceSavedTagFilters","sourceSavedTagFiltersLocalStorageKey","doGetSourceSavedTagFilters","doDeleteView","doDeleteSource","localStorageSourceViewIds","doRenameView","doRenameSource","EMPTY_SOURCE_CONTENT","json","viewID","Error","viewResponse","tagResponse","view_json","tags_json","filters","getFileStorageSystemClient","LocalFileStorageSystemClient","HostedFileStorageSystemClient","clientInterface","reduce","partial","fileStorageSystemClient","SourceEditorWithTagFiltersInput","keydownHandler","window","navigator","platform","metaKey","ctrlKey","keyCode","FileStorageSystemClient","success","changeFile","focusAtStart","handleSetCurrentOpenFileId","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","confirm","batch","convertFilesListStateToFileIdNamesList","filesListState","countNumFiles","count","RENAME_INPUT_TYPES","getRenameInputIdFunctions","NO_RENAMING_STATE","inputType","searching","renaming","nextNewFileIds","selectedFileId","selectedViewId","selectedFileOpen","renameSelected","newViewAnchorElement","FileListItem","selected","padding","InputBase","Divider","orientation","border","childViewsExist","Navigator","resetState","getSourceName","getViewName","getFileName","getRenameInputValueFunctions","handleSwitchBackendModeSignedInStatus","handleCancelRenaming","input","setSelectionRange","handleClearSearchingInput","handleChangeSearchingInput","handleDoFileNamesSearch","filter","includes","handleCreateNewFile","fileType","sourceFileType","localStorageNextNewFileId","newFilePromise","newFile","updatedSourceId","newFilesList","parseInt","handleDeleteFile","sourceFileIdCheck","deleteFilePromise","newSourceViews","newNextNewViewIdsForSourceIds","handleRenameFile","newName","renameFilePromise","prevState","filesListValue","handleFileListClick","handleViewListClick","handleDeleteMenuClick","handleViewMenuOpen","handleViewMenuClose","numFiles","filteredFilesList","numFilteredFiles","endIcon","disableElevation","startAdornment","debounce","button","disableGutters","divider","Collapse","in","timeout","unmountOnExit","disablePadding","remove","x","Grammar","Lexer","ParserRules","symbols","postprocess","literal","d","join","concat","ParserStart","inputText","outputParsedExpr","parser","nearley","Parser","fromCompiled","feed","results","ex","modifyingTagFilters","currentTagFiltersStr","currentParsedTagFiltersStr","Navbar","handleSave","catch","handleCancelModifyingTagFilters","handleStartModifyingTagFilters","handleUnpersistCurrentTagFilters","newSourceSavedTagFilters","handlePersistNewSavedTagFilters","handleApplyTagFilters","tagFiltersStr","parseTagFilters","parsedTagFiltersStr","oldParsedTagFiltersStr","setMeta","Selection","atStart","scrollIntoView","dom","forEach","element","currentTagFiltersSaved","Breadcrumbs","borderRadius","Link","substring","startIcon","paddingTop","paddingBottom","marginTop","Autocomplete","freeSolo","renderInput","params","TextField","reason","paddingRight","aria-haspopup","Card","front","back","isFlipped","flipDirection","createBootstrapCard","handleClick","bind","this","readOnly","StudyView","currentNumber","startIndex","cards","shuffleCards","shuffledCards","j","Math","floor","random","temp","navButtonsAlwaysVisible","indicators","animation","autoPlay","interval","index","next","prev","card","flexDirection","flexWrap","clickable","Tag","Container","styled","div","isDragging","THEME","palette","secondary","dark","light","TagId","h5","Content","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","tagInfo","preview","InnerTagList","nextProps","nextState","nextContext","tagData","tagList","tagIds","columnId","TAG_HOLDERS","IN_VIEW","main","DragDropColumn","isDraggingOver","grey","Title","h3","DroppableRegion","TagList","droppableId","column","droppableProps","tagListRef","createRef","list","current","scrollHeight","scrollTop","AVAILABLE","TagEditor","onDragEnd","result","destination","columns","newTagIds","splice","newColumn","start","finish","startTagIds","newStart","finishTagIds","newFinish","setTagsInView","tags_in_view","Row","columnOrder","tagDataInColumn","Col","md","lg","Set","availableTags","allTagsData","t","has","getPreview","contentNode","recurseResponse","tags_available","assign","CardDeck","constructDoc","constructCard","cardContent","studySwitch","xl","FormControlLabel","control","Switch","checked","data","TextView","constructTextView","ViewEditor","EditorManager","createMuiTheme","App","mounted","handleCloseToast","theme","Fragment","Snackbar","autoHideDuration","elevation","location","hostname","StrictMode","rel","href","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.4826637a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e9d28ab1.png\";","module.exports = __webpack_public_path__ + \"static/media/darkLogo.eccc7628.png\";","module.exports = __webpack_public_path__ + \"static/media/graphic.2ab501e2.png\";","export const fetchWithTimeout = async (uri, options, time = 7500) => {\n  const controller = new AbortController();\n  setTimeout(() => { controller.abort(); }, time);\n  return await fetch(uri, { ...options, signal: controller.signal }).then((response) => {\n    if (!response.ok) { console.log(response); }\n    return response\n  });\n};\n","import Cookies from 'js-cookie';\nimport {fetchWithTimeout} from '../util/FetchWithTimeout';\n\nexport const SERVER_BASE_URL = process.env.NODE_ENV === 'development'\n  ? \"http://localhost:5000/\" : \"https://yaas-gca4j5hw3q-uc.a.run.app/\";\n\nexport const BACKEND_MODE_SIGNED_IN_STATUS = {\n  USER_SIGNED_IN: 'USER_SIGNED_IN',\n  USER_SIGNED_OUT: 'USER_SIGNED_OUT',\n  LOCAL_STORAGE: 'LOCAL_STORAGE',\n}\n\nexport const ACCESS_TOKEN_COOKIE_KEY = 'access_token';\n\nexport const getUserSignedInStatus = async () => {\n  const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n  if (token) {\n    try {\n      const { ok } = await fetchWithTimeout(\n        SERVER_BASE_URL + `auth`,\n        { headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (ok) { return BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_IN; }\n    } catch (e) { console.log(e); }\n  }\n  return BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT;\n};\n\nexport const INITIAL_LOCAL_STORAGE_BACKEND_MODE_LOCAL_STORAGE_KEY = 'initialLocalStorageBackendMode';\n\nconst SET_BACKEND_MODE_SIGNED_IN_STATUS_ACTION_TYPE = 'backendModeSignedInStatus/set';\nexport const setBackendModeSignedInStatusAction =\n  status => ({ type: SET_BACKEND_MODE_SIGNED_IN_STATUS_ACTION_TYPE, status });\nexport const backendModeSignedInStatusReducer = (\n  state = localStorage.getItem(INITIAL_LOCAL_STORAGE_BACKEND_MODE_LOCAL_STORAGE_KEY)\n    ? BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE : BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT,\n  action,\n) => {\n  if (\n    action.type !== SET_BACKEND_MODE_SIGNED_IN_STATUS_ACTION_TYPE || !action.hasOwnProperty('status') ||\n    !BACKEND_MODE_SIGNED_IN_STATUS.hasOwnProperty(action.status)\n  ) { return state; }\n  if (action.status === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n    localStorage.setItem(INITIAL_LOCAL_STORAGE_BACKEND_MODE_LOCAL_STORAGE_KEY, true);\n  } else { localStorage.removeItem(INITIAL_LOCAL_STORAGE_BACKEND_MODE_LOCAL_STORAGE_KEY); }\n  return action.status;\n};\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport {GoogleLogin} from 'react-google-login';\nimport axios from 'axios';\nimport Cookies from 'js-cookie'\nimport {\n  BACKEND_MODE_SIGNED_IN_STATUS,\n  SERVER_BASE_URL,\n  ACCESS_TOKEN_COOKIE_KEY,\n  setBackendModeSignedInStatusAction,\n} from '../reducers/BackendModeSignedInStatus';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport ReactTypingEffect from 'react-typing-effect';\n\nconst CLIENT_ID = '709358329925-gic89ini15sgaenfrta1gshej1ik72jg.apps.googleusercontent.com';\n\nclass LandingPage extends React.Component {\n\n  handleLoginSuccess = async ({ profileObj: { name, email }, tokenObj: { id_token: token, expiresAt: expiry } }) => {\n    let response = null;\n    try {\n      response = await axios.post(\n        SERVER_BASE_URL + 'register_user',\n        {\n          method: 'POST',\n          body: JSON.stringify({ name, email, token }),\n          headers: { 'Content-Type': 'application/json', 'Set-Cookie': `token=${token}` },\n        },\n        { withCredentials: true },\n      );\n    } catch(e) { console.log(e); }\n    if (response && response.status === 201) {\n      Cookies.set(ACCESS_TOKEN_COOKIE_KEY, token, { expires: new Date(expiry) });\n      this.props.dispatchSetBackendModeSignedInStatusAction(BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_IN);\n    }\n  };\n\n  render = () =>\n    <div style={{display:\"flex\", flexFlow: \"column\", height: \"100vh\", overflow: \"hidden\"}}>\n      <div className={\"landing-root\"} style={{flexGrow: \"0 1 auto\"}}>\n      <AppBar position=\"static\" class=\"custom-navbar\">\n        <Toolbar>\n          <img className={\"menuButton\"} src={require('../images/logo.png')} style={{width: \"50px\", marginRight: \"1%\"}} alt={\"MENU\"}/>\n        </Toolbar>\n      </AppBar>\n\n    </div>\n    <div style={{backgroundColor: \"#F5F0E1\", flex: \"1 1 auto\", display:\"flex\"}}>\n    <Grid container spacing={3} alignItems=\"center\">\n        <Grid item xs={1}></Grid>\n        <Grid item xs={5} alignItems=\"center\">\n          <Grid container spacing={3} alignItems=\"center\">\n            <Grid item xs={3}>\n              <img src={require('../images/darkLogo.png')} style={{width: \"90%\", marginLeft: \"20%\"}} alt={\"YADA\"}/>\n            </Grid>\n            <Grid item xs={9}>\n              <Typography variant=\"h1\" className={\"title\"} style={{fontFamily:\"Bungee\", color:\"#1E3D59\"}}>\n              YADA\n              <ReactTypingEffect\n                text = \"\"\n                style={{fontFamily:\"Signika\"}}\n                speed = {10000}\n              />\n              </Typography>\n              <Typography variant=\"h3\" className={\"title\"} style={{fontFamily:\"Signika\", color:\"#1E3D59\"}}>\n               Yet Another Docs App\n              </Typography>\n             </Grid>\n          </Grid>\n          <br />\n          <div style={{marginLeft: \"8%\"}}>\n              <GoogleLogin\n                  clientId={CLIENT_ID}\n                  buttonText=\"Sign in With Google\"\n                  onSuccess={response => { this.handleLoginSuccess(response); }}\n                  onFailure={response => { console.log(response); }}\n                  cookiePolicy=\"single_host_origin\"\n                  responseType=\"code,token\"\n                  style={{float: \"left\"}}\n                />\n                <Button \n                  variant=\"outlined\"\n                  style={{\"height\" : \"250%\", marginLeft: \"3%\"}}\n                  onClick={() => {\n                    this.props.dispatchSetBackendModeSignedInStatusAction(BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE);\n                  }}>\n                  Use local storage\n                </Button>\n          </div>\n        </Grid>\n        <Grid item xs={6}>\n           <img src={require('../images/graphic.png')} style={{width: \"70%\", marginLeft: \"10%\"}} alt={\"Document Graphic\"}/>\n        </Grid>\n    </Grid>\n    </div>\n  </div>\n}\n\nexport default connect(\n  state => ({ backendModeSignedInStatus: state.backendModeSignedInStatus }),\n  dispatch => ({\n    dispatchSetBackendModeSignedInStatusAction: mode => dispatch(setBackendModeSignedInStatusAction(mode)),\n  }),\n)(LandingPage);\n","export const FILE_TYPE = {\n  SOURCE: 'SOURCE',\n  TEXT_VIEW: 'TEXT_VIEW',\n  CARD_VIEW: 'CARD_VIEW',\n  EMPTY: 'NON_EXISTENT',\n};\n\nexport const NO_OPEN_FILE_ID = { sourceId: 0, viewId: 0, viewType: FILE_TYPE.EMPTY };\n\nexport const validateFileIdObj = fileId => fileId.hasOwnProperty('sourceId') && fileId.hasOwnProperty('viewId');\nexport const validateHasFileIdObj = state => state.hasOwnProperty('fileId') && validateFileIdObj(state.fileId);\nexport const validateFileNameObj = fileName => fileName.hasOwnProperty('sourceName') && fileName.hasOwnProperty('viewName');\nexport const validateHasFileNameObj = state => state.hasOwnProperty('fileName') && validateFileNameObj(state.fileName);\n\nexport const checkNoOpenFileId = fileId => validateFileIdObj(fileId) && !fileId.sourceId && !fileId.viewId;\nexport const checkSourceFileId = fileId => validateFileIdObj(fileId) && fileId.sourceId && !fileId.viewId;\nexport const checkViewFileId = fileId => validateFileIdObj(fileId) && fileId.sourceId && fileId.viewId;\n\nexport const getFileIdKeyStr = fileId => validateFileIdObj(fileId)\n  ? (fileId.sourceId + (fileId.viewId ? '#' + fileId.viewId : '')) : '';\n","export const convertStrValueOrDefault =\n  (valueStr, defaultValue, failureMessage, convertFromString = valueStr => JSON.parse(valueStr)) => {\n    let value = defaultValue;\n    if (valueStr) {\n      try { value = convertFromString(valueStr); }\n      catch (e) {\n        if (failureMessage) { console.log(failureMessage); }\n        console.log(e);\n      }\n    }\n    return value;\n  };\n\nexport const convertStrValueOrDefaultIfFalsy =\n  (valueStr, defaultValue, failureMessage, convertFromString = valueStr => JSON.parse(valueStr)) => {\n    if (!valueStr) { return defaultValue; }\n    let value = null;\n    try { value = convertFromString(valueStr); }\n    catch (e) {\n      if (failureMessage) { console.log(failureMessage); }\n      console.log(e);\n    }\n    return value;\n  };\n","import {convertStrValueOrDefault} from '../util/ConvertStrValueOrDefault';\nimport {NO_OPEN_FILE_ID, validateHasFileIdObj, validateHasFileNameObj} from '../util/FileIdAndTypeUtils';\n\nexport const INITIAL_FILE_ID_LOCAL_STORAGE_KEY = 'initialFileId';\nexport const INITIAL_FILE_NAME_LOCAL_STORAGE_KEY = 'initialFileName';\n\nconst storedInitialFileId = convertStrValueOrDefault(\n  localStorage.getItem(INITIAL_FILE_ID_LOCAL_STORAGE_KEY),\n  {},\n  'invalid initialFileId',\n);\n\nconst storedInitialFileName = convertStrValueOrDefault(\n  localStorage.getItem(INITIAL_FILE_NAME_LOCAL_STORAGE_KEY),\n  {},\n  'invalid initialFileName',\n);\n\nconst initialFileId = {\n  sourceId: storedInitialFileId.hasOwnProperty('sourceId')\n    ? storedInitialFileId.sourceId : NO_OPEN_FILE_ID.sourceId,\n  viewId: storedInitialFileId.hasOwnProperty('viewId') ? storedInitialFileId.viewId : NO_OPEN_FILE_ID.viewId,\n  viewType: storedInitialFileId.hasOwnProperty('viewType') ? storedInitialFileId.viewType : NO_OPEN_FILE_ID.viewType,\n}\n\nconst initialFileName = {\n  sourceName: storedInitialFileName.hasOwnProperty('sourceName')\n    ? storedInitialFileName.sourceName : '',\n  viewName: storedInitialFileName.hasOwnProperty('viewName') ? storedInitialFileName.viewName : '',\n}\n\nconst SET_CURRENT_OPEN_FILE_ID_ACTION_TYPE = 'currentOpenFileId/set';\nexport const setCurrentOpenFileIdAction = fileId => ({ type: SET_CURRENT_OPEN_FILE_ID_ACTION_TYPE, fileId });\nexport const currentOpenFileIdReducer = (state = initialFileId, action) =>\n  action.type !== SET_CURRENT_OPEN_FILE_ID_ACTION_TYPE || !validateHasFileIdObj(action)\n    ? state : action.fileId;\n\nconst SET_CURRENT_OPEN_FILE_NAME_ACTION_TYPE = 'currentOpenFileName/set';\nexport const setCurrentOpenFileNameAction = fileName => ({ type: SET_CURRENT_OPEN_FILE_NAME_ACTION_TYPE, fileName });\nexport const currentOpenFileNameReducer = (state = initialFileName, action) =>\n  action.type !== SET_CURRENT_OPEN_FILE_NAME_ACTION_TYPE || !validateHasFileNameObj(action)\n    ? state : action.fileName;\n\nexport const SET_SAVE_DIRTY_FLAG_ACTION_TYPE = 'saveDirtyFlag/set';\nexport const CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE = 'saveDirtyFlag/clear';\nexport const saveDirtyFlagReducer = (state = false, action) =>\n  action.type !== SET_SAVE_DIRTY_FLAG_ACTION_TYPE && action.type !== CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE\n    ? state : action.type === SET_SAVE_DIRTY_FLAG_ACTION_TYPE;\n\nconst SET_SELECT_NODE_ACTION_TYPE = 'selectNode/set';\nexport const setSelectNodeAction = selectNode => ({ type: SET_SELECT_NODE_ACTION_TYPE, selectNode });\nexport const selectNodeReducer = (state = null, action) =>\n  action.type === SET_SELECT_NODE_ACTION_TYPE && action.hasOwnProperty('selectNode') &&\n  (!action.selectNode || action.selectNode.hasOwnProperty('pos'))\n    ? action.selectNode : (action.type === SET_SELECT_NODE_ACTION_TYPE ? null : state);\n","export const SET_TAGS_IN_VIEW_ACTION_TYPE = 'tagsInView/set';\nexport const setTagsInViewAction = tagsInView => ({ type: SET_TAGS_IN_VIEW_ACTION_TYPE, tagsInView });\nexport const setTagsInViewReducer = (state = null, action) =>\n\taction.type !== SET_TAGS_IN_VIEW_ACTION_TYPE || !action.hasOwnProperty('tagsInView')\n\t\t? state : action.tagsInView;\n","export const SET_TOAST_ACTION_TYPE = 'toast/set';\nexport const setToastAction = toast => ({ type: SET_TOAST_ACTION_TYPE, toast });\n\nexport const TOAST_DURATION_MS = 5000;\nexport const TOAST_CLEAR = 'clear';\nexport const TOAST_SEVERITY = {\n\tERROR: 'error',\n\tWARNING: 'warning',\n\tINFO: 'info',\n\tSUCCESS: 'success',\n}\nconst DEFAULT_STATE = {\n\tmessage: \"\",\n\tseverity: TOAST_SEVERITY.INFO,\n\topen: false\n}\n\nexport const setToastReducer = (state = DEFAULT_STATE, action) =>\n\taction.type !== SET_TOAST_ACTION_TYPE || !action.hasOwnProperty('toast')\n\t\t? state : (action === TOAST_CLEAR ? DEFAULT_STATE : action.toast);\n","import {configureStore} from '@reduxjs/toolkit';\nimport {combineReducers} from 'redux';\nimport {currentOpenFileIdReducer, saveDirtyFlagReducer, selectNodeReducer, currentOpenFileNameReducer} from './reducers/CurrentOpenFileState';\nimport {backendModeSignedInStatusReducer} from './reducers/BackendModeSignedInStatus';\nimport {setTagsInViewReducer} from \"./reducers/SetTagsInView\";\nimport {setToastReducer} from \"./reducers/Toast\";\n\nexport default configureStore({\n  reducer: combineReducers({\n    currentOpenFileId: currentOpenFileIdReducer,\n    currentOpenFileName: currentOpenFileNameReducer,\n    saveDirtyFlag: saveDirtyFlagReducer,\n    selectNode: selectNodeReducer,\n    backendModeSignedInStatus: backendModeSignedInStatusReducer,\n    tagsInView: setTagsInViewReducer,\n    toast: setToastReducer,\n  }),\n});\n","import {Plugin, PluginKey} from 'prosemirror-state';\nimport {Decoration, DecorationSet} from 'prosemirror-view';\nimport {setSelectNodeAction} from '../../reducers/CurrentOpenFileState';\nimport store from '../../store';\n\nconst SELECT_NODE_PLUGIN_NAME = 'select-node';\nexport const SelectNodePluginKey = new PluginKey(SELECT_NODE_PLUGIN_NAME);\n\nexport default new Plugin({\n  key: SelectNodePluginKey,\n  state: {\n    init: () => null,\n    apply: (tr, _value, oldState) => {\n      let head = tr.selection.head;\n      let newState = null;\n      tr.doc.nodesBetween(head, head, (node, pos) => {\n        if (node.hasOwnProperty('attrs') && node.attrs['tags']) { newState = { node, pos }; }\n      });\n      if (\n        (!oldState && newState) || (oldState && !newState) ||\n        (oldState && newState && (newState.pos !== oldState.pos || !newState.node.eq(oldState.node)))\n      ) { store.dispatch(setSelectNodeAction(newState ? { pos: newState.pos } : null)); }\n      return newState;\n    },\n  },\n  props: {\n    decorations: state => {\n      const selectDecorations = [];\n      const selectNode = SelectNodePluginKey.getState(state);\n      if (selectNode) {\n        selectDecorations.push(Decoration.node(\n          selectNode.pos,\n          selectNode.pos + selectNode.node.nodeSize,\n          { style: 'background: #FAFAFA; outline: 1px solid #DCDCDC;' },\n        ));\n      }\n      return DecorationSet.create(state.doc, selectDecorations);\n    },\n  },\n});\n","import {Plugin, PluginKey} from 'prosemirror-state';\nimport {Decoration, DecorationSet} from 'prosemirror-view';\nimport {SelectNodePluginKey} from './SelectNode';\n\nconst TAG_FILTERING_PLUGIN_NAME = 'tag-filtering';\nexport const TagFilteringPluginKey = new PluginKey(TAG_FILTERING_PLUGIN_NAME);\n\nconst matchTagFilters = (tags, tagFilters) => {\n  if (!tagFilters) { return true; }\n  if (!Array.isArray(tagFilters)) { return tags.hasOwnProperty(tagFilters); }\n  // invariant: tagFilters isArray\n  // only not expressions have array length 2\n  if (tagFilters.length === 2) { return !matchTagFilters(tags, tagFilters[1]); }\n  const match1 = matchTagFilters(tags, tagFilters[0]);\n  if (tagFilters.length === 1) { return match1; }\n  // invariant: length 3, [1] is op, [2] is tag or sub expression\n  const andOp = tagFilters[1] === '&';\n  // short circuit evaluation\n  if (andOp !== match1) { return match1; }\n  // invariant:\n  // if andOp then !match1, so result should be match2,\n  // if !andOp then match1, so result should be match2\n  return matchTagFilters(tags, tagFilters[2]);\n};\n\nconst evaluateTagFilters = (decorations, tagFilters, selectNode, node, parentTags, pos) => {\n  let match = false;\n  const taggable = node.hasOwnProperty('attrs') && node.attrs['tags'];\n  const nodeTags = { ...parentTags, ...(taggable ? node.attrs['tags'] : null) };\n  if (taggable) { match = matchTagFilters(nodeTags, tagFilters); }\n  if (!node.isTextblock) {\n    let cumulativeChildSize = 1;\n    for (let i = 0; i < node.childCount; ++i) {\n      const child = node.child(i);\n      const childPos = pos + cumulativeChildSize;\n      const childMatch = evaluateTagFilters(decorations, tagFilters, selectNode, child, nodeTags, childPos);\n      match = match || childMatch;\n      cumulativeChildSize += child.nodeSize;\n    }\n  }\n  if (pos !== 0 && !match) {\n    decorations.push(Decoration.node(pos - 1, pos - 1 + node.nodeSize, { style: 'display: none;' }));\n  }\n  return match;\n};\n\nexport default new Plugin({\n  key: TagFilteringPluginKey,\n  state: {\n    init: () => null,\n    apply: (tr, v) => {\n      const val = tr.getMeta(TagFilteringPluginKey);\n      return val === undefined ? v : val;\n    },\n  },\n  props: {\n    decorations: state => {\n      const filterDecorations = [];\n      const tagFilters = TagFilteringPluginKey.getState(state);\n      const selectNode = SelectNodePluginKey.getState(state);\n      if (tagFilters) { evaluateTagFilters(filterDecorations, tagFilters, selectNode, state.doc, {}, 0); }\n      return DecorationSet.create(state.doc, filterDecorations);\n    },\n  },\n});\n","import {Plugin, PluginKey} from 'prosemirror-state';\nimport {checkSourceFileId} from '../../util/FileIdAndTypeUtils';\nimport {TagFilteringPluginKey} from './TagFiltering';\nimport store from '../../store';\n\nconst CANCEL_LINE_BREAKS_PLUGIN_NAME = 'cancel-line-breaks';\nexport const CancelLineBreaksPluginKey = new PluginKey(CANCEL_LINE_BREAKS_PLUGIN_NAME);\n\nconst checkInsertLineBreakReplaceStep = step => step.slice.content.content.some(node => !node.isLeaf);\n\nconst checkRemoveLineBreakReplaceStep = (step, doc) => {\n  if (step.from === step.to) { return false; }\n  const fromNode = doc.nodeAt(step.from);\n  const toNode = doc.nodeAt(step.to);\n  if (toNode) { return !fromNode || (fromNode && !fromNode.eq(toNode)); }\n  return !fromNode || !doc.nodeAt(step.to - 1).eq(fromNode);\n};\n\nexport default new Plugin({\n  key: CancelLineBreaksPluginKey,\n  filterTransaction: (tr, state) =>\n    (checkSourceFileId(store.getState().currentOpenFileId) && !TagFilteringPluginKey.getState(state)) ||\n    tr.steps.every(\n      step => step.toJSON().stepType !== 'replace' ||\n        (!checkInsertLineBreakReplaceStep(step) && !checkRemoveLineBreakReplaceStep(step, state.doc))\n    ),\n});\n","import {Extension} from 'rich-markdown-editor';\nimport CancelLineBreaksPlugin from './plugins/CancelLineBreaks';\nimport SelectNodePlugin from './plugins/SelectNode';\nimport TagFilteringPlugin from './plugins/TagFiltering';\n\nclass BlockTagging extends Extension {\n  get name() { return 'yada-blockTagging'; }\n  get plugins() { return [CancelLineBreaksPlugin, SelectNodePlugin, TagFilteringPlugin]; }\n}\n\nexport default new BlockTagging();\n","import './TagMenu.css';\nimport {defer} from 'lodash';\nimport {v4 as uuidv4} from 'uuid';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {SET_SAVE_DIRTY_FLAG_ACTION_TYPE} from '../reducers/CurrentOpenFileState';\n\nimport BlockTaggingEditorExtension from '../editor_extension/BlockTagging';\nimport {setToastAction, TOAST_SEVERITY} from \"../reducers/Toast\";\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputBase from '@material-ui/core/InputBase';\nimport Divider from '@material-ui/core/Divider';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Popover from '@material-ui/core/Popover';\nimport CheckIcon from '@material-ui/icons/Check';\nimport Input from '@material-ui/core/Input';\nimport Chip from '@material-ui/core/Chip';\n\nconst RENAME_TAG_FIELD = 'rename_field';\n\nconst ADD_TAG_INPUT_ID = 'add_tag_input';\n\nconst TAG_VALUE_REGEX = /[^{}]/;\nconst INVALID_TAG_VALUE_REGEX = /[{}]/;\n\nclass TagListItem extends React.Component {\n  render = () => \n    <div style={{width:\"100%\", display: \"flex\", alignItems: \"center\"}}>\n      <Chip\n        label={this.props.tagValue}\n        color=\"primary\"\n        onDelete={(event) => this.props.handleEditMenuClick(event, this.props.tagValue)}\n        deleteIcon={<MoreVertIcon color=\"secondary\"/>}\n        style={{width: \"100%\", justifyContent: \"space-between\"}}\n        variant=\"outlined\"\n      />\n    </div>\n};\n\nclass TagMenu extends React.Component {\n\n  state = { selectNodeAttrs: {}, modifying: '', editMenuAnchorElement: null, renamePopoverElement: null, currentTag: '' }\n\n  handleAddTag = () => {\n    const tag = document.getElementById(ADD_TAG_INPUT_ID).value.trim();\n    if (!tag || INVALID_TAG_VALUE_REGEX.test(tag) || !this.props.selectNode) { return false; }\n    if (this.state.selectNodeAttrs.hasOwnProperty('tags') && this.state.selectNodeAttrs.tags.hasOwnProperty(tag)) {\n      this.props.dispatchSetToastAction({\n        message: `Tag value \"${tag}\" already exists`,\n        severity: TOAST_SEVERITY.ERROR,\n        open: true\n      });\n      return false;\n    }\n    const newSelectNodeAttrs = { ...this.state.selectNodeAttrs, tags: {...this.state.selectNodeAttrs.tags} };\n    newSelectNodeAttrs.tags[tag] = uuidv4();\n    BlockTaggingEditorExtension.editor.view.dispatch(\n      BlockTaggingEditorExtension.editor.view.state.tr.setNodeMarkup(\n        this.props.selectNode.pos,\n        null,\n        newSelectNodeAttrs,\n      )\n    );\n    this.setState({ selectNodeAttrs: newSelectNodeAttrs });\n    this.props.dispatchSetSaveDirtyFlagAction();\n    document.getElementById(ADD_TAG_INPUT_ID).value = '';\n    return true;\n  };\n\n  handleDeleteTag = () => {\n    this.handleEditMenuClose();\n    if (\n      !this.props.selectNode || !this.state.selectNodeAttrs.hasOwnProperty('tags') ||\n      !this.state.selectNodeAttrs.tags.hasOwnProperty(this.state.currentTag)\n    ) { return false; }\n    const newSelectNodeAttrs = { ...this.state.selectNodeAttrs, tags: {...this.state.selectNodeAttrs.tags} };\n    delete newSelectNodeAttrs.tags[this.state.currentTag];\n    BlockTaggingEditorExtension.editor.view.dispatch(\n      BlockTaggingEditorExtension.editor.view.state.tr.setNodeMarkup(\n        this.props.selectNode.pos,\n        null,\n        newSelectNodeAttrs,\n      )\n    );\n    this.setState({ selectNodeAttrs: newSelectNodeAttrs, currentTag : '' });\n    this.props.dispatchSetSaveDirtyFlagAction();\n    return true;\n  };\n\n  handleModifyTagValue = () => {\n    const newTagValue = document.getElementById(RENAME_TAG_FIELD).value.trim();\n    if (\n      !newTagValue || INVALID_TAG_VALUE_REGEX.test(newTagValue) || !this.props.selectNode ||\n      !this.state.selectNodeAttrs.hasOwnProperty('tags') ||\n      !this.state.selectNodeAttrs.tags.hasOwnProperty(this.state.currentTag)\n    ) { return false; }\n    if (newTagValue === this.state.currentTag) { return true; }\n    if (this.state.selectNodeAttrs.tags.hasOwnProperty(newTagValue)) {\n      this.props.dispatchSetToastAction({\n        message: `Tag value ${newTagValue} already exists`,\n        severity: TOAST_SEVERITY.ERROR,\n        open: true\n      });\n      return false;\n    }\n    const newSelectNodeAttrs = { ...this.state.selectNodeAttrs, tags: {...this.state.selectNodeAttrs.tags} };\n    newSelectNodeAttrs.tags[newTagValue] = newSelectNodeAttrs.tags[this.state.currentTag];\n    delete newSelectNodeAttrs.tags[this.state.currentTag];\n    BlockTaggingEditorExtension.editor.view.dispatch(\n      BlockTaggingEditorExtension.editor.view.state.tr.setNodeMarkup(\n        this.props.selectNode.pos,\n        null,\n        newSelectNodeAttrs,\n      )\n    );\n    this.setState({ selectNodeAttrs: newSelectNodeAttrs });\n    this.props.dispatchSetSaveDirtyFlagAction();\n    return true;\n  };\n  \n  componentDidUpdate = prevProps => {\n    if (\n      prevProps.currentOpenFileId.sourceId !== this.props.currentOpenFileId.sourceId ||\n      prevProps.currentOpenFileId.viewId !== this.props.currentOpenFileId.viewId ||\n      (!prevProps.selectNode && this.props.selectNode) || (prevProps.selectNode && !this.props.selectNode) ||\n      (prevProps.selectNode && this.props.selectNode && prevProps.selectNode.pos !== this.props.selectNode.pos)\n    ) {\n      document.getElementById(ADD_TAG_INPUT_ID).value = '';\n      defer(() => {\n        if (this.props.selectNode) {\n          const node = BlockTaggingEditorExtension.editor.view.state.doc.nodeAt(this.props.selectNode.pos);\n          this.setState({ selectNodeAttrs: {...(node && node.hasOwnProperty('attrs') ? node.attrs : null)} });\n        } else { this.setState({ selectNodeAttrs: {} }); }\n      });\n    }\n  };\n\n  handleEditMenuClick = (event, tag) => {\n    this.setState({\n      editMenuAnchorElement: event.currentTarget,\n      currentTag: tag\n    })\n  }\n\n  handleEditMenuClose = () => {\n    this.setState({\n      editMenuAnchorElement: null\n    })\n  }\n\n  handleRenameMenuClick = (event) => {\n    this.setState({\n      renamePopoverElement: this.state.editMenuAnchorElement,\n      editMenuAnchorElement: null\n    })\n  }\n\n  handleRenamePopoverClose = () => {\n    this.setState({\n      renamePopoverElement: null\n    })\n  }\n\n  render = () => \n    <div className=\"MarginPane\">\n      <div id=\"tag_menu_wrapper\">\n        <div className=\"InputRow\" id=\"add_tag_input_row\">\n          <OutlinedInput\n            id={ADD_TAG_INPUT_ID}\n            title=\"New Tag\"\n            placeholder=\"New Tag\"\n            color=\"primary\"\n            disabled={!this.props.selectNode}\n            onKeyPress={event=> {\n              if (event.key === 'Enter' && this.handleAddTag()) { event.target.value = ''; }\n              if (!TAG_VALUE_REGEX.test(event.key)) { event.preventDefault(); }\n            }}\n            onKeyDown={event=> {\n              if (event.key === 'Escape') {\n                event.target.value = '';\n                BlockTaggingEditorExtension.editor.view.focus();\n              }\n            }}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"Add\"\n                  title=\"add\"\n                  disabled={!this.props.selectNode}\n                  onClick={this.handleAddTag}\n                  edge=\"end\"\n                >\n                  <AddCircleIcon color=\"primary\" />\n                </IconButton>\n              </InputAdornment>\n            }\n            margin=\"dense\"\n          />\n        </div>\n        <div id=\"tag_menu_list_container\">\n          {\n            this.props.selectNode && this.state.selectNodeAttrs.hasOwnProperty('tags') &&\n            Object.keys(this.state.selectNodeAttrs.tags).length > 0\n              ? <List\n                  component=\"nav\"\n                  aria-labelledby=\"nested-list-subheader\"\n                  subheader={\n                    <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                      Tags\n                    </ListSubheader>\n                  }\n                  style={{\"maxWidth\" : 360, \"width\" : '100%'}}\n                >\n                  {\n                    Object.keys(this.state.selectNodeAttrs.tags).map((tag) =>\n                      <ListItem\n                       dense={true}\n                      >\n                        <TagListItem \n                          tagValue = {tag}\n                          handleEditMenuClick={this.handleEditMenuClick}\n                        />\n                      </ListItem>\n                    )\n                  }\n                </List>\n              : <div className=\"PlaceholderDivWithText\" id=\"no_tags_placeholder\">\n                  {'No ' + (!this.props.selectNode ? 'Selected Block' : 'Block Tags')}\n                </div>\n          }\n          <Menu\n            id=\"edit_menu\"\n            anchorEl={this.state.editMenuAnchorElement}\n            keepMounted\n            open={Boolean(this.state.editMenuAnchorElement)}\n            onClose={() => this.handleEditMenuClose()}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n          >\n              <MenuItem onClick={() => this.handleRenameMenuClick()}>\n                <ListItemIcon>\n                  <EditIcon fontSize=\"small\" color=\"primary\"  />\n                </ListItemIcon>\n                <ListItemText primary=\"Rename\" color=\"primary\"/>\n              </MenuItem>\n              <MenuItem onClick={() => this.handleDeleteTag()}>\n                <ListItemIcon>\n                  <DeleteIcon fontSize=\"small\" color=\"primary\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Delete\" color=\"primary\"/>\n              </MenuItem>\n          </Menu>\n          <Popover\n            open={Boolean(this.state.renamePopoverElement)}\n            anchorEl={this.state.renamePopoverElement}\n            anchorOrigin={{\n              vertical:'top',\n              horizontal: 'right'\n            }}\n            transformOrigin={{\n              vertical:'top',\n              horizontal: 'right'\n            }}\n            id=\"rename_popover\"\n          >\n            <Input\n              id={RENAME_TAG_FIELD}\n              autoFocus={true}\n              defaultValue={this.state.currentTag}\n              onBlur={event => {this.handleModifyTagValue();                      \n                                this.handleRenamePopoverClose();\n              }}\n              onKeyDown={event => {\n                if (event.key === 'Escape') { event.target.value = this.state.currentTag; }\n              }}\n              onKeyPress={event => {\n                if (event.key === 'Enter') { event.target.blur(); }\n                if (!TAG_VALUE_REGEX.test(event.key)) { event.preventDefault(); }\n              }}\n              endAdornment={\n                <InputAdornment position=\"end\">\n                  <IconButton \n                    onClick= {() => {\n                      this.handleModifyTagValue();\n                      this.handleRenamePopoverClose();\n                    }}\n                  >\n                      <CheckIcon/>\n                  </IconButton>\n                </InputAdornment>\n              }\n              disableUnderline={true}\n              fullWidth={true}\n              style={{height:\"50px\", \"paddingLeft\": \"10px\"}}\n            />\n          </Popover>\n        </div>\n      </div>\n    </div>;\n};\n\nexport default connect(\n  state => ({\n    selectNode: state.selectNode,\n    saveDirtyFlag: state.saveDirtyFlag,\n    currentOpenFileId: state.currentOpenFileId,\n  }),\n  dispatch => ({\n    dispatchSetSaveDirtyFlagAction: () => dispatch({ type: SET_SAVE_DIRTY_FLAG_ACTION_TYPE }),\n    dispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n  }),\n)(TagMenu);\n","import './Editor.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {checkNoOpenFileId} from '../util/FileIdAndTypeUtils';\nimport {\n  SET_SAVE_DIRTY_FLAG_ACTION_TYPE,\n} from '../reducers/CurrentOpenFileState';\nimport {TextSelection} from 'prosemirror-state';\nimport TagMenu from './TagMenu';\nimport RichMarkdownEditor from 'rich-markdown-editor';\nimport BlockTaggingEditorExtension from '../editor_extension/BlockTagging';\n\nclass Editor extends React.Component {\n  render = () => {\n    const noOpenFileIdCheck = checkNoOpenFileId(this.props.currentOpenFileId);\n    return (\n      <div className=\"MainPane\">\n        <div className=\"editor_container\">\n          <div className=\"editor\" hidden={noOpenFileIdCheck}>\n            <RichMarkdownEditor\n              extensions={[BlockTaggingEditorExtension]}\n              key={this.props.fileIdKeyStr}\n              defaultValue={this.props.fileContent}\n              jsonStrValue={!(!this.props.fileContent)}\n              onKeyDown={event => {\n                if (event.key === 'Escape') {\n                  BlockTaggingEditorExtension.editor.view.dispatch(\n                    BlockTaggingEditorExtension.editor.view.state.tr\n                      .setSelection(TextSelection.create(BlockTaggingEditorExtension.editor.view.state.doc, 0, 0))\n                  );\n                  event.target.blur();\n                }\n              }}\n              onChange={() => { if (!this.props.saveDirtyFlag) { this.props.dispatchSetSaveDirtyFlagAction(); } }}\n            />\n          </div>\n          <div\n            className=\"placeholder_editor\"\n            hidden={!noOpenFileIdCheck}>\n            <h5>Click or create a new document from the left pane</h5>\n          </div>\n        </div>\n        <TagMenu />\n      </div>\n    );\n  };\n};\n\nexport default connect(\n  state => ({ currentOpenFileId: state.currentOpenFileId, currentOpenFileName: state.currentOpenFileName, saveDirtyFlag: state.saveDirtyFlag }),\n  dispatch => ({ dispatchSetSaveDirtyFlagAction: () => dispatch({ type: SET_SAVE_DIRTY_FLAG_ACTION_TYPE }) }),\n)(Editor);\n","import {convertStrValueOrDefault, convertStrValueOrDefaultIfFalsy} from '../util/ConvertStrValueOrDefault';\nimport {getFileIdKeyStr} from '../util/FileIdAndTypeUtils';\n\nconst SOURCE_VIEWS_LOCAL_STORAGE_KEY_PREFIX = 'sourceViews_';\n\n// API-ish\nexport const doSetLocalStorageSourceViews = (sourceId, sourceViews) =>\n  localStorage.setItem(SOURCE_VIEWS_LOCAL_STORAGE_KEY_PREFIX + sourceId, JSON.stringify(sourceViews));\n\nconst doGetLocalStorageSourceViews = sourceId => convertStrValueOrDefaultIfFalsy(\n  localStorage.getItem(SOURCE_VIEWS_LOCAL_STORAGE_KEY_PREFIX + sourceId),\n  {},\n  'invalid sourceViews',\n);\n\nconst SOURCE_ID_NAMES_LOCAL_STORAGE_KEY = 'sourceIdNames';\n\n// API-ish\nexport const doSetLocalStorageSourceIdNames = sourceIdNames =>\n  localStorage.setItem(SOURCE_ID_NAMES_LOCAL_STORAGE_KEY, JSON.stringify(sourceIdNames));\n\nconst doGetLocalStorageSourceIdNames = () => convertStrValueOrDefaultIfFalsy(\n  localStorage.getItem(SOURCE_ID_NAMES_LOCAL_STORAGE_KEY),\n  {},\n  'invalid sourceIdNames',\n);\n\nexport const calculateLocalStorageNextNewId = (existingIdsDict, candidate) => {\n  while (!candidate || existingIdsDict.hasOwnProperty(candidate.toString())) { candidate += 1; }\n  return candidate.toString();\n};\n\nexport const calculateLocalStorageNextNewFileIds = filesList => ({\n  source: calculateLocalStorageNextNewId(filesList, 0),\n  nextNewViewIdsForSourceIds: Object.fromEntries(Object.entries(filesList).map(\n    ([sourceId, { views }]) => [sourceId, calculateLocalStorageNextNewId(views, 0)]\n  )),\n});\n\nconst DEFAULT_VIEW_NAME = 'Unnamed View';\nconst DEFAULT_SOURCE_NAME = 'Unnamed Source';\n\nconst SOURCE_SAVED_TAG_FILTERS_LOCAL_STORAGE_KEY_PREFIX = 'sourceSavedTagFilters_';\n\nconst VIEW_SPEC_LOCAL_STORAGE_KEY_PREFIX = 'viewSpec_';\n\nconst SOURCE_CONTENT_LOCAL_STORAGE_KEY_PREFIX = 'sourceContent_';\n\nexport default {\n  doGetFilesList: async () => {\n    const sourceIdNames = doGetLocalStorageSourceIdNames();\n    if (!sourceIdNames) { return null; }\n    const filesList = {};\n    for (const [sourceId, sourceName] of Object.entries(sourceIdNames)) {\n      const sourceViews = doGetLocalStorageSourceViews(sourceId);\n      if (!sourceViews) { return null; }\n      filesList[sourceId] = { name: sourceName, views: sourceViews };\n    }\n    return filesList;\n  },\n  doSaveViewSpec: async (tagsList, sourceId, viewId, type, createNew) => {\n    const viewSpecLocalStorageKey = VIEW_SPEC_LOCAL_STORAGE_KEY_PREFIX + getFileIdKeyStr(sourceId, viewId);\n    if (tagsList.length > 0) { localStorage.setItem(viewSpecLocalStorageKey, JSON.stringify(tagsList)); }\n    else { localStorage.removeItem(viewSpecLocalStorageKey); }\n    return { id: viewId, sourceId, ...(createNew ? { name: DEFAULT_VIEW_NAME, type } : null) };\n  },\n  doGetView: async (fileId) => convertStrValueOrDefaultIfFalsy(\n    localStorage.getItem(VIEW_SPEC_LOCAL_STORAGE_KEY_PREFIX + getFileIdKeyStr(fileId.sourceId, fileId.viewId)),\n    [],\n    'invalid viewSpec',\n  ),\n  doGetSourceTaggedBlocks: async sourceId => {\n    const sourceContentDocStr = localStorage.getItem(SOURCE_CONTENT_LOCAL_STORAGE_KEY_PREFIX + sourceId);\n    if (!sourceContentDocStr) { return {}; }\n    const sourceContentDoc = convertStrValueOrDefault(sourceContentDocStr, null, 'invalid sourceContent');\n    if (!sourceContentDoc) { return null; }\n    const sourceTaggedBlocks = {};\n    if (sourceContentDoc) {\n      const nodes = [sourceContentDoc];\n      while (nodes.length > 0) {\n        const node = nodes.shift();\n        if (node.hasOwnProperty('attrs') && node.attrs.hasOwnProperty('tags')) {\n          for (const [tag, tagId] of Object.entries(node.attrs.tags)) { sourceTaggedBlocks[tagId] = { tag, node }; }\n        } else if (node.hasOwnProperty('content')) { nodes.push(...node.content); }\n      }\n    }\n    return sourceTaggedBlocks;\n  },\n  doSaveSourceContent: async (value, sourceId, createNew) => {\n    const saveValue = convertStrValueOrDefaultIfFalsy(\n      value,\n      '',\n      'invalid sourceContent value',\n      valueStr => {\n        JSON.parse(valueStr);\n        return valueStr;\n      },\n    );\n    if (saveValue === null) { return null; }\n    const sourceContentLocalStorageKey = SOURCE_CONTENT_LOCAL_STORAGE_KEY_PREFIX + sourceId;\n    if (saveValue) { localStorage.setItem(sourceContentLocalStorageKey, saveValue); }\n    else { localStorage.removeItem(sourceContentLocalStorageKey); }\n    return { id: sourceId, ...(createNew ? { name: DEFAULT_SOURCE_NAME } : null) };\n  },\n  doGetSourceContent: async sourceId => convertStrValueOrDefaultIfFalsy(\n    localStorage.getItem(SOURCE_CONTENT_LOCAL_STORAGE_KEY_PREFIX + sourceId),\n    '',\n    'invalid sourceContent',\n    valueStr => {\n      JSON.parse(valueStr);\n      return valueStr;\n    },\n  ),\n  // TODO add/remove single instead of set list\n  doSetSourceSavedTagFilters: async (sourceId, sourceSavedTagFilters) => {\n    const sourceSavedTagFiltersLocalStorageKey = SOURCE_SAVED_TAG_FILTERS_LOCAL_STORAGE_KEY_PREFIX + sourceId;\n    if (Object.keys(sourceSavedTagFilters).length > 0) {\n      localStorage.setItem(sourceSavedTagFiltersLocalStorageKey, JSON.stringify(sourceSavedTagFilters));\n    } else { localStorage.removeItem(sourceSavedTagFiltersLocalStorageKey); }\n    return true;\n  },\n  doGetSourceSavedTagFilters: async sourceId => convertStrValueOrDefaultIfFalsy(\n    localStorage.getItem(SOURCE_SAVED_TAG_FILTERS_LOCAL_STORAGE_KEY_PREFIX + sourceId),\n    {},\n    'invalid sourceSavedTagFilters',\n  ),\n  doDeleteView: async (sourceId, viewId) => {\n    localStorage.removeItem(VIEW_SPEC_LOCAL_STORAGE_KEY_PREFIX + getFileIdKeyStr(sourceId, viewId));\n    return true;\n  },\n  doDeleteSource: async (sourceId, localStorageSourceViewIds) => {\n    localStorage.removeItem(SOURCE_SAVED_TAG_FILTERS_LOCAL_STORAGE_KEY_PREFIX + sourceId);\n    localStorage.removeItem(SOURCE_CONTENT_LOCAL_STORAGE_KEY_PREFIX + sourceId);\n    for (const viewId of localStorageSourceViewIds) {\n      localStorage.removeItem(VIEW_SPEC_LOCAL_STORAGE_KEY_PREFIX + getFileIdKeyStr(sourceId, viewId));\n    }\n    localStorage.removeItem(SOURCE_VIEWS_LOCAL_STORAGE_KEY_PREFIX + sourceId);\n    return true;\n  },\n  doRenameView: async () => true,\n  doRenameSource: async () => true,\n};\n","import Cookies from 'js-cookie';\nimport {fetchWithTimeout} from '../util/FetchWithTimeout';\nimport {convertStrValueOrDefaultIfFalsy} from '../util/ConvertStrValueOrDefault';\nimport {ACCESS_TOKEN_COOKIE_KEY, SERVER_BASE_URL} from '../reducers/BackendModeSignedInStatus';\n\nconst EMPTY_SOURCE_CONTENT = { type: 'doc', content: [{ type: 'paragraph', attrs: { tags: {} } }] };\n\nexport default {\n  doGetFilesList: async () => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `documents`,\n        { headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (response.ok) { return await response.json(); }\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doSaveViewSpec: async (tagsList, sourceId, viewId, type, createNew) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `view?docID=${sourceId}&viewType=${type}` + (!createNew ? `&viewID=${viewId}` : ''),\n        {\n          method: 'PUT',\n          body: JSON.stringify({ tags: tagsList }),\n          headers: new Headers({ 'Content-Type': 'application/json', 'Set-Cookie': `token=${token}` }),\n        },\n    );\n    if (response.ok) {\n      const { viewID } = await response.json();\n      return { id: viewID, sourceId: sourceId, ...(createNew ? { name:\"Untitled\", type } : null) };\n    }\n    throw new Error(\"Failed to save view\");\n  },\n  doGetView: async (fileId) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const viewResponse = await fetchWithTimeout(\n        SERVER_BASE_URL + `view?docID=${fileId.sourceId}&viewID=${fileId.viewId}`,\n        { method: 'GET', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      const tagResponse = await fetchWithTimeout(\n          SERVER_BASE_URL + `tags?docID=${fileId.sourceId}`,\n          { method: 'GET', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (!viewResponse.ok || !tagResponse.ok) { return null; }\n      const view_json = await viewResponse.json();\n      const tags_json = await tagResponse.json();\n      return {\"view\": view_json, \"tags\": tags_json, \"type\": fileId.viewType};\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doGetSourceTaggedBlocks: async sourceId => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `tags?docID=${sourceId}`,\n        { method: 'GET', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (response.ok) { return await response.json(); };\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doSaveSourceContent: async (value, sourceId, createNew) => {\n    const saveValue = convertStrValueOrDefaultIfFalsy(\n      value,\n      JSON.stringify(EMPTY_SOURCE_CONTENT),\n      'invalid sourceContent value',\n      valueStr => {\n        JSON.parse(valueStr);\n        return valueStr;\n      },\n    );\n    if (!saveValue) { return null; }\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + 'document' + (!createNew ? `?docID=${sourceId}` : ''),\n        {\n          method: 'PUT',\n          body: saveValue,\n          headers: new Headers({ 'Content-Type': 'application/json', 'Set-Cookie': `token=${token}` }),\n        },\n      );\n      if (response.ok) {\n        const { id, name } = await response.json();\n        return { id: id, ...(createNew ? { name } : null) };\n      };\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doGetSourceContent: async sourceId => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `document?docID=${sourceId}`,\n        { headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (response.ok) { return await response.text(); }\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doSetSourceSavedTagFilters: async (sourceId, sourceSavedTagFilters) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    const filters = Object.keys(sourceSavedTagFilters);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `filters?docID=`,\n        {\n          method: 'POST',\n          body: JSON.stringify({ body: {\"docID\": sourceId, \"filters\": filters} }),\n          headers: new Headers({ 'Content-Type': 'application/json', 'Set-Cookie': `token=${token}` }),\n        },\n      );\n      if (response.ok) {\n        return true;\n      };\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doGetSourceSavedTagFilters: async sourceId => { // TODO\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const response = await fetchWithTimeout(\n        SERVER_BASE_URL + `filters?docID=${sourceId}`,\n        { headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      if (response.ok) { return await response.json(); }\n    } catch (e) { console.log(e); }\n    return null;\n  },\n  doDeleteSource: async sourceId => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const { ok } = await fetchWithTimeout(\n        SERVER_BASE_URL + `document?docID=${sourceId}`,\n        { method: 'DELETE', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      return ok;\n    } catch (e) { console.log(e); }\n    return false;\n  },\n  doDeleteView: async (sourceId, viewId) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const { ok } = await fetchWithTimeout(\n        SERVER_BASE_URL + `view?docID=${sourceId}&viewID=${viewId}`,\n        { method: 'DELETE', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      return ok;\n    } catch (e) { console.log(e); }\n    return false;\n  },\n  doRenameSource: async (sourceId, name) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const { ok } = await fetchWithTimeout(\n        SERVER_BASE_URL + `document?docID=${sourceId}&name=${name}`,\n        { method: 'PATCH', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      return ok;\n    } catch (e) { console.log(e); }\n    return false;\n  },\n  doRenameView: async (sourceId, viewId, name) => {\n    const token = Cookies.get(ACCESS_TOKEN_COOKIE_KEY);\n    try {\n      const { ok } = await fetchWithTimeout(\n        SERVER_BASE_URL + `view?docID=${sourceId}&viewID=${viewId}&name=${name}`,\n        { method: 'PATCH', headers: new Headers({ 'Set-Cookie': `token=${token}` }) },\n      );\n      return ok;\n    } catch (e) { console.log(e); }\n    return false;\n  },\n};\n","import {BACKEND_MODE_SIGNED_IN_STATUS} from '../reducers/BackendModeSignedInStatus';\nimport LocalFileStorageSystemClient from './LocalFileStorageSystemClient';\nimport HostedFileStorageSystemClient from './HostedFileStorageSystemClient';\nimport store from '../store';\n\nconst getFileStorageSystemClient = () =>\n  store.getState().backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE\n    ? LocalFileStorageSystemClient : HostedFileStorageSystemClient;\n\nconst clientInterface = {\n  doGetFilesList: () => { throw new Error('not implemented'); },\n  doSaveViewSpec: () => { throw new Error('not implemented'); },\n  doGetView: () => { throw new Error('not implemented'); },\n  doGetSourceTaggedBlocks: () => { throw new Error('not implemented'); },\n  doSaveSourceContent: () => { throw new Error('not implemented'); },\n  doGetSourceContent: () => { throw new Error('not implemented'); },\n  doSetSourceSavedTagFilters: () => { throw new Error('not implemented'); },\n  doGetSourceSavedTagFilters: () => { throw new Error('not implemented'); },\n  doDeleteView: () => { throw new Error('not implemented'); },\n  doDeleteSource: () => { throw new Error('not implemented'); },\n  doRenameView: () => { throw new Error('not implemented'); },\n  doRenameSource: () => { throw new Error('not implemented'); },\n};\n\nexport default Object.keys(clientInterface).reduce(\n  (partial, key) => {\n    partial[key] = async (...args) => {\n      const fileStorageSystemClient = getFileStorageSystemClient();\n      return fileStorageSystemClient.hasOwnProperty(key)\n        ? (\n            store.getState().backendModeSignedInStatus !== BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT\n              ? await fileStorageSystemClient[key](...args) : null\n          )\n        : clientInterface[key]();\n    };\n    return partial;\n  },\n  {},\n);\n","import './Editor.css';\nimport {defer} from 'lodash';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {NO_OPEN_FILE_ID, checkNoOpenFileId, checkSourceFileId, getFileIdKeyStr} from '../util/FileIdAndTypeUtils';\nimport Editor from './Editor';\nimport {handleSetCurrentOpenFileId} from './Navigator';\n\nimport FileStorageSystemClient from '../backend/FileStorageSystemClient';\nimport BlockTaggingEditorExtension from '../editor_extension/BlockTagging';\nimport {setToastAction, TOAST_SEVERITY} from \"../reducers/Toast\";\nimport {BACKEND_MODE_SIGNED_IN_STATUS} from \"../reducers/BackendModeSignedInStatus\";\nimport store from \"../store\";\nimport {CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE} from \"../reducers/CurrentOpenFileState\";\n\nexport const INITIAL_TAG_FILTERS_LOCAL_STORAGE_KEY = 'initialTagFilters';\n\nconst DEFAULT_STATE = {\n  fileIdKeyStr: getFileIdKeyStr(NO_OPEN_FILE_ID),\n  fileContent: '',\n};\n\nclass SourceEditorWithTagFiltersInput extends React.Component {\n\n  state = DEFAULT_STATE;\n  \n  keydownHandler = event => {\n    if ((window.navigator.platform.match(\"Mac\") ? event.metaKey : event.ctrlKey) && event.keyCode === 83) {\n      event.preventDefault();\n      if (this.props.backendModeSignedInStatus !== BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT) {\n        if (checkSourceFileId(this.props.currentOpenFileId)) {\n          FileStorageSystemClient.doSaveSourceContent(\n              BlockTaggingEditorExtension.editor.value(true),\n              this.props.currentOpenFileId.sourceId,\n          ).then(success => {\n            if (success) {\n              this.props.dispatchSetToastAction({\n                message: \"Saved source file\",\n                severity: TOAST_SEVERITY.SUCCESS,\n                open: true\n              });\n              store.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE });\n            }\n            else {\n              this.props.dispatchSetToastAction({\n                message: \"Failed to save source file\",\n                severity: TOAST_SEVERITY.ERROR,\n                open: true\n              });\n            }\n          });\n        }\n      }\n    }\n  }\n  \n  changeFile = async () => {\n    if (!checkNoOpenFileId(this.props.currentOpenFileId)) {\n      defer(() => {\n        BlockTaggingEditorExtension.editor.focusAtStart();\n      });\n    }\n    const fileIdKeyStr = getFileIdKeyStr(this.props.currentOpenFileId);\n    if (checkSourceFileId(this.props.currentOpenFileId)) {\n      FileStorageSystemClient.doGetSourceContent(this.props.currentOpenFileId.sourceId).then(value => {\n        if (value === null) {\n          this.props.dispatchSetToastAction({\n            message: \"Failed to retrieve source content\",\n            severity: TOAST_SEVERITY.ERROR,\n            open: true\n          });\n          handleSetCurrentOpenFileId(NO_OPEN_FILE_ID);\n        } else {\n          this.setState({fileIdKeyStr, fileContent: value ?? ''});\n        }\n      });\n    } else {\n      this.setState({fileIdKeyStr, fileContent: ''});\n    }\n  };\n\n  componentDidMount = () => {\n    document.addEventListener('keydown',this.keydownHandler);\n    this.changeFile();\n  };\n  \n  componentWillUnmount = () => { document.removeEventListener('keydown', this.keydownHandler); };\n  \n  \n  componentDidUpdate = prevProps => {\n    if (\n      prevProps.currentOpenFileId.sourceId !== this.props.currentOpenFileId.sourceId ||\n      prevProps.currentOpenFileId.viewId !== this.props.currentOpenFileId.viewId\n    ) {\n      this.changeFile();\n    }\n  };\n\n  render = () => {\n    return (\n      <Editor fileIdKeyStr={this.state.fileIdKeyStr} fileContent={this.state.fileContent} />\n    );\n  };\n}\n\nexport default connect(\n    state => ({\n      currentOpenFileId: state.currentOpenFileId,\n      currentOpenFileName: state.currentOpenFileName\n    }),\n    dispatch => ({\n      dispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n    }),\n)(SourceEditorWithTagFiltersInput);\n","import './Navigator.css';\nimport {debounce, defer} from 'lodash';\nimport Cookies from 'js-cookie';\nimport React from 'react';\nimport {batch, connect} from 'react-redux';\nimport {\n  FILE_TYPE,\n  NO_OPEN_FILE_ID,\n  validateFileIdObj,\n  checkNoOpenFileId,\n  checkSourceFileId,\n  checkViewFileId,\n  getFileIdKeyStr,\n} from '../util/FileIdAndTypeUtils';\nimport {INITIAL_TAG_FILTERS_LOCAL_STORAGE_KEY} from './SourceEditorWithTagFiltersInput';\nimport {\n  CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE,\n  INITIAL_FILE_ID_LOCAL_STORAGE_KEY,\n  INITIAL_FILE_NAME_LOCAL_STORAGE_KEY,\n  setCurrentOpenFileIdAction,\n  setCurrentOpenFileNameAction,\n  setSelectNodeAction,\n} from '../reducers/CurrentOpenFileState';\nimport {\n  ACCESS_TOKEN_COOKIE_KEY,\n  BACKEND_MODE_SIGNED_IN_STATUS,\n  getUserSignedInStatus,\n  setBackendModeSignedInStatusAction,\n} from '../reducers/BackendModeSignedInStatus';\nimport {\n  doSetLocalStorageSourceIdNames,\n  doSetLocalStorageSourceViews,\n  calculateLocalStorageNextNewId,\n  calculateLocalStorageNextNewFileIds,\n} from '../backend/LocalFileStorageSystemClient';\nimport Button from '@material-ui/core/Button';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Divider from '@material-ui/core/Divider';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Collapse from '@material-ui/core/Collapse';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport InputBase from '@material-ui/core/InputBase';\nimport IconButton from '@material-ui/core/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Popover from '@material-ui/core/Popover';\nimport store from '../store';\nimport FileStorageSystemClient from '../backend/FileStorageSystemClient';\nimport CheckIcon from '@material-ui/icons/Check';\nimport AddIcon from '@material-ui/icons/Add';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport AmpStoriesIcon from '@material-ui/icons/AmpStories';\nimport {setToastAction, TOAST_SEVERITY} from \"../reducers/Toast\";\n\nexport const handleSetCurrentOpenFileId = (fileId, fileName={\"sourceName\": '', \"viewName\": ''}) => {\n  if (!validateFileIdObj(fileId)) { return false; }\n  const currentOpenFileId = store.getState().currentOpenFileId;\n  if (fileId.sourceId === currentOpenFileId.sourceId && fileId.viewId === currentOpenFileId.viewId) { return true; }\n  if (!store.getState().saveDirtyFlag || window.confirm('confirm discard unsaved changes')) {\n    batch(() => {\n      store.dispatch(setCurrentOpenFileIdAction(fileId));\n      store.dispatch(setCurrentOpenFileNameAction(fileName));\n      store.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE });\n      store.dispatch(setSelectNodeAction(null));\n    });\n    localStorage.setItem(INITIAL_FILE_ID_LOCAL_STORAGE_KEY, JSON.stringify(fileId));\n    localStorage.setItem(INITIAL_FILE_NAME_LOCAL_STORAGE_KEY, JSON.stringify(fileName));\n    localStorage.removeItem(INITIAL_TAG_FILTERS_LOCAL_STORAGE_KEY);\n    return true;\n  }\n  return false;\n};\n\nconst convertFilesListStateToFileIdNamesList = filesListState => Object.fromEntries(\n  Object.entries(filesListState).map(([id, { name }]) => [id, name])\n);\n\nconst countNumFiles = filesList => Object.entries(filesList)\n  .reduce((count, [_sourceId, { views }]) => count + 1 + Object.keys(views).length, 0);\n\nconst FILE_LIST_ID = 'file_list';\n\nconst SEARCH_FILE_NAMES_INPUT_ID = 'search_file_names_input';\n\nconst CURRENT_SOURCE_NAME_INPUT_ID = 'current_source_name_input';\nconst CURRENT_VIEW_NAME_INPUT_ID = 'current_view_name_input';\n\nconst RENAME_SOURCE_LIST_ITEM_INPUT_ID_PREFIX = 'rename_source_list_item_input_';\nconst RENAME_VIEW_LIST_ITEM_INPUT_ID_PREFIX = 'rename_view_list_item_input_';\n\nconst RENAME_INPUT_TYPES = {\n  CURRENT_SOURCE: 'CURRENT_SOURCE',\n  CURRENT_VIEW: 'CURRENT_VIEW',\n  SOURCE_LIST_ITEM: 'SOURCE_LIST_ITEM',\n  VIEW_LIST_ITEM: 'VIEW_LIST_ITEM',\n};\n\nconst getRenameInputIdFunctions = {\n  [RENAME_INPUT_TYPES.CURRENT_SOURCE]: () => CURRENT_SOURCE_NAME_INPUT_ID,\n  [RENAME_INPUT_TYPES.CURRENT_VIEW]: () => CURRENT_VIEW_NAME_INPUT_ID,\n  [RENAME_INPUT_TYPES.SOURCE_LIST_ITEM]: fileId => RENAME_SOURCE_LIST_ITEM_INPUT_ID_PREFIX + fileId.sourceId,\n  [RENAME_INPUT_TYPES.VIEW_LIST_ITEM]: fileId => RENAME_VIEW_LIST_ITEM_INPUT_ID_PREFIX + getFileIdKeyStr(fileId),\n};\n\nconst NO_RENAMING_STATE = { inputType: null, fileId: NO_OPEN_FILE_ID };\n\nconst DEFAULT_STATE = {\n  searching: '',\n  renaming: NO_RENAMING_STATE,\n  filesList: {},\n  nextNewFileIds: null,\n  selectedFileId: null,\n  selectedViewId: null,\n  selectedFileOpen: false,\n  editMenuAnchorElement: null,\n  renameSelected: false,\n  newViewAnchorElement: null\n};\n\nclass FileListItem extends React.Component {\n  render = () => {\n    if(this.props.fileId.viewId !== 0){\n      const viewType = this.props.viewType;\n      return (\n        <div className={\"fileList-viewRoot\"} style={(this.props.selected) ? \n                                                  {backgroundColor: 'rgba(30, 61, 89, 0.3)', width:\"100%\", display: \"flex\", padding: \"2px 4px\", alignItems: \"center\"} : \n                                                  {width:\"100%\", display: \"flex\", padding: \"2px 4px\", alignItems: \"center\"} }>\n          <IconButton>\n            {\n              (viewType === FILE_TYPE.CARD_VIEW) ? \n              <AmpStoriesIcon color=\"primary\"/>:\n              (viewType === FILE_TYPE.TEXT_VIEW) ?\n             <TextFieldsIcon color=\"primary\"/> :\n              null\n            }\n          </IconButton>\n          <InputBase \n            value={this.props.fileName}\n            className=\"file_list_input\"\n            disabled={!(this.props.selected && this.props.renameSelected)}\n            style={{color: \"#1E3D59\"}}\n          />\n          <Divider className={\"fileList-divider\"} orientation=\"vertical\" />\n          <IconButton className={\"fileList-iconButton\"} onClick={this.props.handleEditMenuClick}>\n            <MoreVertIcon fontSize=\"small\" color=\"primary\"/>\n          </IconButton>\n        </div>\n      );\n    }else{\n      return (\n        <div className={\"fileList-viewRoot\"} style={(this.props.selected) ? \n                                                      {backgroundColor: 'rgba(30, 61, 89, 0.3)', border:\"solid #3f51b5 thin\", width:\"100%\", display: \"flex\", padding: \"2px 4px\", alignItems: \"center\"} :\n                                                       {width:\"100%\", display: \"flex\", padding: \"2px 4px\", alignItems: \"center\"} }>\n          <InputBase \n            value={this.props.fileName}\n            className=\"file_list_input\"\n            disabled={!(this.props.selected && this.props.renameSelected)}\n            style={{color: \"#1E3D59\"}}\n          />\n          {this.props.childViewsExist ? (this.props.open ? <ExpandLess /> : <ExpandMore />) : null}\n          <Divider className={\"fileList-divider\"} orientation=\"vertical\" />\n          <IconButton className={\"fileList-iconButton\"} onClick={this.props.handleEditMenuClick}>\n            <MoreVertIcon fontSize=\"small\" color=\"primary\"/>\n          </IconButton>\n        </div>\n      );\n    }\n  }\n};\n\nclass Navigator extends React.Component {\n  \n  state = DEFAULT_STATE;\n\n  resetState = () => { this.setState(DEFAULT_STATE); }\n\n  getSourceName = fileId => validateFileIdObj(fileId) && this.state.filesList.hasOwnProperty(fileId.sourceId)\n      ? this.state.filesList[fileId.sourceId].name : '';\n  \n  getViewName = fileId => checkViewFileId(fileId) && this.state.filesList.hasOwnProperty(fileId.sourceId) &&\n    this.state.filesList[fileId.sourceId].views.hasOwnProperty(fileId.viewId)\n      ? this.state.filesList[fileId.sourceId].views[fileId.viewId].name : '';\n\n  getFileName = fileId => checkViewFileId(fileId) ? this.getViewName(fileId) : this.getSourceName(fileId);\n\n  getRenameInputValueFunctions = {\n    [RENAME_INPUT_TYPES.CURRENT_SOURCE]: this.getSourceName,\n    [RENAME_INPUT_TYPES.CURRENT_VIEW]: this.getViewName,\n    [RENAME_INPUT_TYPES.SOURCE_LIST_ITEM]: this.getFileName,\n    [RENAME_INPUT_TYPES.VIEW_LIST_ITEM]: this.getFileName,\n  };\n\n  handleSwitchBackendModeSignedInStatus = status => {\n    if (status === this.props.backendModeSignedInStatus) { return true; }\n    if (handleSetCurrentOpenFileId(NO_OPEN_FILE_ID)) {\n      this.resetState();\n      this.props.dispatchSetBackendModeSignedInStatusAction(status);\n      return true;\n    }\n    return false;\n  };\n\n  handleCancelRenaming = (inputType, fileId) => {\n    const input = document.getElementById(getRenameInputIdFunctions[inputType](fileId));\n    input.value = this.getRenameInputValueFunctions[inputType](fileId);\n    input.setSelectionRange(0, 0);\n    this.setState({ renaming: NO_RENAMING_STATE });\n  };\n\n  handleClearSearchingInput = () => {\n    document.getElementById(SEARCH_FILE_NAMES_INPUT_ID).value = '';\n    this.setState({ searching: '' });\n  };\n\n  handleChangeSearchingInput = () => {\n    this.setState({ searching: document.getElementById(SEARCH_FILE_NAMES_INPUT_ID).value.trim() });\n  };\n\n  handleDoFileNamesSearch = () => Object.fromEntries(\n    Object.entries(this.state.filesList).map(([sourceId, { name: sourceName, views }]) => [\n      sourceId,\n      {\n        name: sourceName,\n        views: this.state.searching\n          ? Object.fromEntries(Object.entries(views).filter(\n              ([_viewId, { name: viewName }]) => viewName.includes(this.state.searching)\n            ))\n          : views,\n      },\n    ]).filter(\n      ([_sourceId, { name: sourceName, views }]) => !this.state.searching ||\n        Object.keys(views).length > 0 || sourceName.includes(this.state.searching)\n    )\n  );\n\n  handleCreateNewFile = async fileType => {\n    if (!FILE_TYPE.hasOwnProperty(fileType)) { return; }\n    const sourceFileType = fileType === FILE_TYPE.SOURCE;\n    const noOpenFileIdCheck = checkNoOpenFileId(this.props.currentOpenFileId);\n    if (\n      (noOpenFileIdCheck && !sourceFileType) ||\n      (!noOpenFileIdCheck && !handleSetCurrentOpenFileId(NO_OPEN_FILE_ID))\n    ) { return; }\n    const localStorageNextNewFileId =\n      this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE\n        ? (\n            sourceFileType\n              ? this.state.nextNewFileIds.source\n              : this.state.nextNewFileIds.nextNewViewIdsForSourceIds[this.props.currentOpenFileId.sourceId]\n          )\n        : null;\n    const newFilePromise = sourceFileType\n      ? FileStorageSystemClient.doSaveSourceContent(null, localStorageNextNewFileId, true)\n      : FileStorageSystemClient.doSaveViewSpec(\n          [],\n          this.props.currentOpenFileId.sourceId,\n          localStorageNextNewFileId,\n          fileType,\n          true,\n        );\n    try {\n      const newFile = await newFilePromise;\n      const updatedSourceId = sourceFileType ? newFile.id : this.state.selectedFileId;\n      const newFilesList = {\n        ...this.state.filesList,\n        [updatedSourceId]: {\n          name: sourceFileType ? newFile.name : this.state.filesList[updatedSourceId].name,\n          views: {\n            ...(\n                !sourceFileType\n                    ? {\n                      ...this.state.filesList[updatedSourceId].views,\n                      [newFile.id]: {name: newFile.name, type: newFile.type},\n                    }\n                    : null\n            ),\n          },\n        },\n      };\n      this.setState(\n        {filesList: newFilesList,\n         selectedFileId: updatedSourceId,\n         selectedFileOpen: !sourceFileType,\n         selectedViewId: (sourceFileType) ? 0 : newFile.id\n        });\n      \n      defer(() => {\n        const fileId = {sourceId: updatedSourceId, viewId: !sourceFileType ? newFile.id : 0, viewType: sourceFileType ? FILE_TYPE.EMPTY: newFile.type};\n        const fileName = {sourceName: this.getSourceName(fileId), viewName: this.getViewName(fileId)};\n        handleSetCurrentOpenFileId(fileId, fileName);\n      });\n      if (this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n        if (sourceFileType) {\n          doSetLocalStorageSourceIdNames(convertFilesListStateToFileIdNamesList(newFilesList));\n        } else {\n          doSetLocalStorageSourceViews(updatedSourceId, newFilesList[updatedSourceId].views);\n        }\n        this.setState({\n          nextNewFileIds: {\n            source: sourceFileType\n                ? calculateLocalStorageNextNewId(newFilesList, parseInt(updatedSourceId))\n                : this.state.nextNewFileIds.source,\n            nextNewViewIdsForSourceIds: {\n              ...this.state.nextNewFileIds.nextNewViewIdsForSourceIds,\n              ...(\n                  !sourceFileType\n                      ? {\n                        [updatedSourceId]:\n                            calculateLocalStorageNextNewId(newFilesList[updatedSourceId].views, parseInt(newFile.id)),\n                      }\n                      : null\n              ),\n            },\n          },\n        });\n      }\n    } catch (e) {\n      this.props.dispatchSetToastAction({\n        message: \"Failed to create new file\",\n        severity: TOAST_SEVERITY.ERROR,\n        open: true\n      });\n    }\n  }\n\n  handleDeleteFile = async fileId => {\n    if (checkNoOpenFileId(fileId)) { return; }\n    if (\n      fileId.sourceId === this.props.currentOpenFileId.sourceId &&\n      fileId.viewId === this.props.currentOpenFileId.viewId &&\n      !handleSetCurrentOpenFileId(NO_OPEN_FILE_ID)\n    ) { return; }\n    const sourceFileIdCheck = checkSourceFileId(fileId);\n    const deleteFilePromise = sourceFileIdCheck\n      ? FileStorageSystemClient.doDeleteSource(\n          fileId.sourceId,\n          Object.keys(this.state.filesList[fileId.sourceId].views),\n        )\n      : FileStorageSystemClient.doDeleteView(fileId.sourceId, fileId.viewId);\n    const success = await deleteFilePromise;\n    if (!success) {\n      this.props.dispatchSetToastAction({\n        message: \"Failed to delete file\",\n        severity: TOAST_SEVERITY.ERROR,\n        open: true\n      });\n      return;\n    }\n    const newFilesList = {...this.state.filesList};\n    if (sourceFileIdCheck) { delete newFilesList[fileId.sourceId]; }\n    else {\n      const newSourceViews = {...newFilesList[fileId.sourceId].views};\n      delete newSourceViews[fileId.viewId];\n      newFilesList[fileId.sourceId] = { name: newFilesList[fileId.sourceId].name, views: newSourceViews };\n    }\n    this.setState({ filesList: newFilesList });\n    if (this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n      if (sourceFileIdCheck) {\n        doSetLocalStorageSourceIdNames(convertFilesListStateToFileIdNamesList(newFilesList));\n        const newNextNewViewIdsForSourceIds = {...this.state.nextNewFileIds.nextNewViewIdsForSourceIds};\n        delete newNextNewViewIdsForSourceIds[fileId.sourceId];\n        this.setState({\n          nextNewFileIds: {\n            source: this.state.nextNewFileIds.source,\n            nextNewViewIdsForSourceIds: newNextNewViewIdsForSourceIds,\n          },\n        });\n      } else { doSetLocalStorageSourceViews(fileId.sourceId, newFilesList[fileId.sourceId].views); }\n    }\n  };\n\n  handleRenameFile = async (fileId) => {\n    if (checkNoOpenFileId(fileId)) { return; }\n    const input = document.getElementById(\"rename_field\");\n    if (!input) { return; }\n    const newName = input.value.trim();\n    if (!newName || newName === this.getFileName(fileId)) { return; }\n    const sourceFileIdCheck = checkSourceFileId(fileId);\n    const renameFilePromise = sourceFileIdCheck\n      ? FileStorageSystemClient.doRenameSource(fileId.sourceId, newName)\n      : FileStorageSystemClient.doRenameView(fileId.sourceId, fileId.viewId, newName);\n    const success = await renameFilePromise;\n    if (!success) {\n      this.props.dispatchSetToastAction({\n        message: \"Failed to rename file\",\n        severity: TOAST_SEVERITY.ERROR,\n        open: true\n      });\n      return;\n    }\n    store.dispatch(setCurrentOpenFileNameAction({sourceName: sourceFileIdCheck ? newName : this.getSourceName(fileId), viewName: sourceFileIdCheck ? '' : newName}));\n    const newFilesList = {...this.state.filesList};\n    if (sourceFileIdCheck) {\n      newFilesList[fileId.sourceId] = { name: newName, views: newFilesList[fileId.sourceId].views };\n    } else {\n      const newSourceViews = {\n        ...newFilesList[fileId.sourceId].views,\n        [fileId.viewId]: { ...newFilesList[fileId.sourceId].views[fileId.viewId], name: newName },\n      };\n      newFilesList[fileId.sourceId] = { name: newFilesList[fileId.sourceId].name, views: newSourceViews };\n    }\n    this.setState({ filesList: newFilesList });\n    if (this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n      if (sourceFileIdCheck) { doSetLocalStorageSourceIdNames(convertFilesListStateToFileIdNamesList(newFilesList)); }\n      else { doSetLocalStorageSourceViews(fileId.sourceId, newFilesList[fileId.sourceId].views); }\n    }\n  };\n\n  componentDidMount = () => {\n    this.setState({\n      selectedFileId : this.props.currentOpenFileId.sourceId,\n      selectedViewId: this.props.currentOpenFileId.viewId,\n      selectedFileOpen: this.props.currentOpenFileId.viewId !== 0\n    })\n    FileStorageSystemClient.doGetFilesList().then(filesList => {\n      if (!filesList) {\n        this.props.dispatchSetToastAction({\n          message: \"Failed to retrieve file list\",\n          severity: TOAST_SEVERITY.ERROR,\n          open: true\n        });\n      } else { this.setState({ filesList }); }\n      if (this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n        this.setState({ nextNewFileIds: calculateLocalStorageNextNewFileIds(this.state.filesList) });\n      }\n    });\n  };\n\n  componentDidUpdate = (prevProps, prevState) => {\n    if (prevProps.backendModeSignedInStatus !== this.props.backendModeSignedInStatus) {\n      FileStorageSystemClient.doGetFilesList().then(filesListValue => filesListValue ?? {}).then(filesList => {\n        this.setState({\n          ...DEFAULT_STATE,\n          filesList,\n          nextNewFileIds: this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE\n            ? calculateLocalStorageNextNewFileIds(filesList) : null,\n        });\n      });\n    }\n  };\n\n  handleFileListClick = (fileId) => {\n    if (fileId === this.state.selectedFileId) {\n      handleSetCurrentOpenFileId({ sourceId:fileId, viewId: 0, viewType: FILE_TYPE.EMPTY}, {sourceName: this.state.filesList[fileId].name, viewName: ''});\n      this.setState({\n        selectedViewId: null,\n        selectedFileOpen: !(this.state.selectedFileOpen)\n      });\n    }else{\n      if(handleSetCurrentOpenFileId({ sourceId:fileId, viewId: 0, viewType: FILE_TYPE.EMPTY}, {sourceName: this.state.filesList[fileId].name, viewName: ''})){\n        this.setState({\n          selectedFileId: fileId,\n          selectedViewId: null,\n          selectedFileOpen: true\n        });\n      }\n    }\n    \n  };\n\n  handleViewListClick = (fileId) => {\n    const fileName = {sourceName: this.getSourceName(fileId), viewName: this.getViewName(fileId)};\n    handleSetCurrentOpenFileId(fileId, fileName);\n    this.setState({\n      selectedViewId: fileId.viewId,\n    });\n  };\n\n  handleEditMenuClick = (event) => {\n    this.setState({\n      editMenuAnchorElement: event.currentTarget\n    })\n  }\n\n  handleEditMenuClose = () => {\n    this.setState({\n      editMenuAnchorElement: null\n    })\n  }\n\n  handleDeleteMenuClick = () => {\n    this.handleEditMenuClose();\n    const fileId = { sourceId: this.state.selectedFileId, viewId: (this.state.selectedViewId === null) ? 0 : this.state.selectedViewId}\n    this.handleDeleteFile(fileId).then(success => {\n      if (fileId.viewId !== 0) {\n        this.setState({\n          selectedViewId: null,\n        });\n      }else{\n        this.setState({\n          selectedFileId: null,\n          selectedViewId: null,\n          selectedFileOpen: false\n        });\n      }\n    });\n  }\n\n  handleRenameMenuClick = (event) => {\n    this.setState({\n      renamePopoverElement: this.state.editMenuAnchorElement,\n      editMenuAnchorElement: null\n    })\n  }\n\n  handleRenamePopoverClose = () => {\n    this.setState({\n      renamePopoverElement: null\n    })\n  }\n\n  handleViewMenuOpen = (event) => {\n    this.setState({\n      newViewAnchorElement : this.state.editMenuAnchorElement\n    })\n  }\n\n  handleViewMenuClose = () => {\n    this.setState({\n      newViewAnchorElement : null,\n      editMenuAnchorElement: null\n    })\n  }\n\n  render = () => {\n    const numFiles = countNumFiles(this.state.filesList);\n    const filteredFilesList = this.state.searching ? this.handleDoFileNamesSearch() : this.state.filesList;\n    const numFilteredFiles = countNumFiles(filteredFilesList);\n    return (\n      <div className=\"SidePane\">\n        <div id=\"file_list_container\">\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              endIcon={<AddCircleIcon />}\n              disableElevation\n              id=\"new_document_button\"\n              onClick={() => { this.handleCreateNewFile(FILE_TYPE.SOURCE); }}\n            >\n              New Document\n            </Button>\n          <div className=\"InputRow\" id=\"search_file_names_input_row\">\n            <Input\n              variant=\"outlined\"\n              id={SEARCH_FILE_NAMES_INPUT_ID}\n              startAdornment={\n                <InputAdornment position=\"start\">\n                  <SearchIcon />\n                </InputAdornment>\n              }\n              style={{\"width\":\"100%\"}}\n              title=\"Search File Names\"\n              placeholder=\"Search File Names\"\n              onChange={debounce(this.handleChangeSearchingInput, 150)}\n              onKeyPress={event => { if (event.key === 'Enter') { event.target.blur(); } }}\n              onKeyDown={event => { if (event.key === 'Escape') { event.target.blur(); } }}\n            />\n          </div>\n          {\n            Object.keys(filteredFilesList).length > 0\n              ?  <List\n                    component=\"nav\"\n                    aria-labelledby=\"nested-list-subheader\"\n                    subheader={\n                      <ListSubheader component=\"div\" id=\"nested-list-subheader\">\n                        Source Files\n                      </ListSubheader>\n                    }\n                    id={FILE_LIST_ID}\n                    style={{\"maxWidth\" : 360, \"width\" : '100%'}}\n                  >\n                  {\n                    Object.entries(filteredFilesList).map(([sourceId, { views }]) =>\n                    <div>\n                      <ListItem button \n                      key={sourceId} \n                      disableGutters={true}\n                      divider={true}\n                      style={{\"padding\":\"0px\"}}\n                      onClick={() => {this.handleFileListClick(sourceId)}}\n                      >\n                        <FileListItem\n                          fileId={{ sourceId, viewId: 0 }}\n                          selected={sourceId === this.state.selectedFileId}\n                          open={sourceId === this.state.selectedFileId && this.state.selectedFileOpen}\n                          handleEditMenuClick={this.handleEditMenuClick}\n                          childViewsExist={Object.keys(views).length > 0}\n                          fileName={this.getFileName({ sourceId, viewId: 0 })}\n                          renameSelected={this.state.renameSelected}\n                        />\n                      </ListItem>\n                        {\n                          Object.keys(views).length > 0\n                            ? <Collapse in={sourceId === this.state.selectedFileId && this.state.selectedFileOpen} timeout=\"auto\" unmountOnExit>\n                                <List component=\"div\" disablePadding style={{\"borderStyle\": \"none solid solid solid\", \"borderColor\" :\"#3f51b5\", \"borderWidth\": \"thin\", \"borderRadius\": \"4px\"}}>\n                                {\n                                  Object.keys(views).map(viewId => {\n                                    const fileId = { sourceId, viewId, \"viewType\": views[viewId].type };\n                                    return (\n                                      <ListItem button \n                                      key={getFileIdKeyStr(fileId)} \n                                      disableGutters={true}\n                                      divider={true}\n                                      style={{ \"paddingTop\": \"0px\", \"paddingBottom\": \"0px\", \"backgroundColor\": \"transparent\"}}\n                                      onClick={() => {this.handleViewListClick(fileId)}}\n                                      >\n                                      <FileListItem\n                                          fileId={fileId}\n                                          open={viewId === this.state.selectedViewId}\n                                          handleEditMenuClick={this.handleEditMenuClick}\n                                          fileName={this.getFileName(fileId)}\n                                          viewType={views[viewId].type}\n                                          renameSelected={this.state.renameSelected}\n                                          selected={viewId === this.state.selectedViewId}\n                                        />\n                                      </ListItem>\n                                    );\n                                  })\n                                }\n                                </List>\n                              </Collapse>\n                            : null\n                          }\n                          </div>   \n                    )\n                  }\n                </List>\n              : <div className=\"PlaceholderDivWithText\" id=\"no_files_placeholder\">\n                  No Files\n                </div>\n          }\n          <Menu\n            id=\"edit_menu\"\n            anchorEl={this.state.editMenuAnchorElement}\n            keepMounted\n            open={Boolean(this.state.editMenuAnchorElement)}\n            onClose={() => this.handleEditMenuClose()}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n          >\n            {\n              (this.state.selectedViewId === null) ? \n              <MenuItem onClick={() => this.handleViewMenuOpen()}>\n                <ListItemIcon>\n                  <AddIcon fontSize=\"small\" color=\"primary\" />\n                </ListItemIcon>\n                <ListItemText primary=\"New View\" color=\"primary\"/>\n              </MenuItem>\n              : null\n            }\n              <MenuItem onClick={() => this.handleRenameMenuClick()}>\n                <ListItemIcon>\n                  <EditIcon fontSize=\"small\" color=\"primary\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Rename\" color=\"primary\"/>\n              </MenuItem>\n              <MenuItem onClick={() => this.handleDeleteMenuClick()}>\n                <ListItemIcon>\n                  <DeleteIcon fontSize=\"small\" color=\"primary\"/>\n                </ListItemIcon>\n                <ListItemText primary=\"Delete\" color=\"primary\"/>\n              </MenuItem>\n          </Menu>\n          <Menu \n            id=\"viewMenu\"\n            anchorEl={this.state.newViewAnchorElement}\n            keepMounted\n            open={Boolean(this.state.newViewAnchorElement)}\n            onClose={() => this.handleViewMenuClose()}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'left',\n            }}\n          >\n              <MenuItem \n                  onClick={() => {\n                    this.handleViewMenuClose();\n                    this.handleCreateNewFile(FILE_TYPE.TEXT_VIEW);}}\n              >\n                <ListItemIcon>\n                  <TextFieldsIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText primary=\"Text View\" />\n              </MenuItem>\n              <MenuItem\n              onClick={() => {\n                this.handleViewMenuClose();\n                this.handleCreateNewFile(FILE_TYPE.CARD_VIEW);}}\n              >\n                <ListItemIcon>\n                  <AmpStoriesIcon fontSize=\"small\" />\n                </ListItemIcon>\n                <ListItemText primary=\"Card View\" />\n              </MenuItem>\n          </Menu>\n          <Popover\n            open={Boolean(this.state.renamePopoverElement)}\n            anchorEl={this.state.renamePopoverElement}\n            anchorOrigin={{\n              vertical:'top',\n              horizontal: 'right'\n            }}\n            transformOrigin={{\n              vertical:'top',\n              horizontal: 'right'\n            }}\n            id=\"rename_popover\"\n          >\n            <Input\n              id=\"rename_field\"\n              autoFocus={true}\n              defaultValue={this.getFileName({sourceId: this.state.selectedFileId, viewId: (this.state.selectedViewId == null) ? 0 : this.state.selectedViewId})}\n              onKeyPress={event => {\n                if(event.key === 'Enter') {\n                    this.handleRenameFile({sourceId: this.state.selectedFileId, viewId: (this.state.selectedViewId == null) ? 0 : this.state.selectedViewId})\n                    this.handleRenamePopoverClose();\n                }   \n              }}\n              onKeyDown={event => {\n                if(event.key === 'Escape') {\n                    this.handleRenamePopoverClose();\n                }   \n              }}\n              endAdornment={\n                <InputAdornment position=\"end\">\n                  <IconButton \n                    onClick= {() => {\n                      this.handleRenameFile({sourceId: this.state.selectedFileId, viewId: (this.state.selectedViewId == null) ? 0 : this.state.selectedViewId})\n                      this.handleRenamePopoverClose();\n                    }}\n                  >\n                      <CheckIcon/>\n                  </IconButton>\n                </InputAdornment>\n              }\n              disableUnderline={true}\n              fullWidth={true}\n              style={{height:\"50px\", \"paddingLeft\": \"10px\"}}\n            />\n          </Popover>\n          <div\n            className=\"PlaceholderDivWithText\"\n            id=\"filtered_files_placeholder\"\n            hidden={!this.state.searching}>\n            {(numFiles - numFilteredFiles) + ' of ' + (numFiles) + ' files hidden by search'}\n          </div>\n        </div>\n        <div id=\"user_controls_container\">\n          {\n            this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_IN\n              ? <Button\n                  variant=\"outlined\"\n                  onClick={() => {\n                    if (\n                      this.props.dispatchSetBackendModeSignedInStatusAction(\n                        BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT\n                      )\n                    ) { Cookies.remove(ACCESS_TOKEN_COOKIE_KEY); }\n                  }}>\n                  Sign out\n                </Button>\n              : null\n          }\n          <Button\n            variant=\"outlined\"\n            onClick={() => {\n              if (this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n                getUserSignedInStatus().then(backendModeSignedInStatus => {\n                  this.handleSwitchBackendModeSignedInStatus(backendModeSignedInStatus);\n                });\n              } else { this.handleSwitchBackendModeSignedInStatus(BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE); }\n            }}>\n            {\n              'Switch to ' +\n              (\n                this.props.backendModeSignedInStatus === BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE\n                  ? 'cloud' : 'local'\n              ) + ' storage'\n            }\n          </Button>\n        </div>\n      </div>\n    );\n  };\n};\n\nexport default connect(\n  state => ({\n    currentOpenFileId: state.currentOpenFileId,\n    backendModeSignedInStatus: state.backendModeSignedInStatus,\n  }),\n  dispatch => ({\n    dispatchSetBackendModeSignedInStatusAction: mode => dispatch(setBackendModeSignedInStatusAction(mode)),\n    dispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n  }),\n)(Navigator);\n","import nearley from 'nearley';\n// Generated automatically by nearley, version undefined\n// http://github.com/Hardmath123/nearley\n/*\nMain -> Expression {% id %}\nExpression -> Expression_ {% id %} | Factor {% id %}\nExpression_ -> Factor _ \"|\" _ Expression {% function(d) { return [d[0], d[2], d[4]] } %}\nFactor -> Factor_ {% id %} | Term {% id %}\nFactor_ -> Term _ \"&\" _ Factor {% function(d) { return [d[0], d[2], d[4]] } %}\nTerm -> Not {% id %} | Nested {% id %} | Tag {% id %}\nNot -> \"!\" (Nested {% id %} | Tag {% id %})\nNested -> \"(\" _ Expression _ \")\" {% function(d) { return d[2] } %}\nTag -> \"#{\" [^{}]:+ \"}\" {% function(d) { return [d[0], d[1].join(\"\"), d[2]].join(\"\") } %}\n_ -> \" \":* {% function(d) { return null } %}\n*/\nfunction id(x) {\n  return x[0];\n}\nconst Grammar = {\n  Lexer: undefined,\n  ParserRules: [\n    { name: \"Main\", symbols: [\"Expression\"], postprocess: id },\n    { name: \"Expression\", symbols: [\"Expression_\"], postprocess: id },\n    { name: \"Expression\", symbols: [\"Factor\"], postprocess: id },\n    {\n      name: \"Expression_\",\n      symbols: [\"Factor\", \"_\", { literal: \"|\", pos: 30 }, \"_\", \"Expression\"],\n      postprocess: function(d) {\n        return [d[0], d[2], d[4]];\n      },\n    },\n    { name: \"Factor\", symbols: [\"Factor_\"], postprocess: id },\n    { name: \"Factor\", symbols: [\"Term\"], postprocess: id },\n    {\n      name: \"Factor_\",\n      symbols: [\"Term\", \"_\", { literal: \"&\", pos: 60 }, \"_\", \"Factor\"],\n      postprocess: function(d) {\n        return [d[0], d[2], d[4]];\n      },\n    },\n    { name: \"Term\", symbols: [\"Not\"], postprocess: id },\n    { name: \"Term\", symbols: [\"Nested\"], postprocess: id },\n    { name: \"Term\", symbols: [\"Tag\"], postprocess: id },\n    { name: \"Not$subexpression$1\", symbols: [\"Nested\"], postprocess: id },\n    { name: \"Not$subexpression$1\", symbols: [\"Tag\"], postprocess: id },\n    {\n      name: \"Not\",\n      symbols: [{ literal: \"!\", pos: 92 }, \"Not$subexpression$1\"],\n    },\n    {\n      name: \"Nested\",\n      symbols: [\n        { literal: \"(\", pos: 110 },\n        \"_\",\n        \"Expression\",\n        \"_\",\n        { literal: \")\", pos: 118 },\n      ],\n      postprocess: function(d) {\n        return d[2];\n      },\n    },\n    {\n      name: \"Tag$string$1\",\n      symbols: [{ literal: \"#\" }, { literal: \"{\" }],\n      postprocess: function joiner(d) {\n        return d.join(\"\");\n      },\n    },\n    { name: \"Tag$ebnf$1\", symbols: [/[^{}]/] },\n    {\n      name: \"Tag$ebnf$1\",\n      symbols: [/[^{}]/, \"Tag$ebnf$1\"],\n      postprocess: function arrconcat(d) {\n        return [d[0]].concat(d[1]);\n      },\n    },\n    {\n      name: \"Tag\",\n      symbols: [\"Tag$string$1\", \"Tag$ebnf$1\", { literal: \"}\", pos: 131 }],\n      postprocess: function(d) {\n        return d[1].join(\"\").trim();\n      },\n    },\n    { name: \"_$ebnf$1\", symbols: [] },\n    {\n      name: \"_$ebnf$1\",\n      symbols: [{ literal: \" \", pos: 139 }, \"_$ebnf$1\"],\n      postprocess: function arrconcat(d) {\n        return [d[0]].concat(d[1]);\n      },\n    },\n    {\n      name: \"_\",\n      symbols: [\"_$ebnf$1\"],\n      postprocess: function(d) {\n        return null;\n      },\n    },\n  ],\n  ParserStart: \"Main\",\n};\nexport const parse = (inputText, throwErrors = true) => {\n  let outputParsedExpr = null;\n  if (inputText) {\n    const parser = new nearley.Parser(nearley.Grammar.fromCompiled(Grammar));\n    try {\n      parser.feed(inputText.trim());\n      if (parser.results.length > 0) {\n        outputParsedExpr = parser.results;\n      }\n    } catch (ex) {}\n  }\n  return outputParsedExpr;\n};\n","import React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport {connect} from 'react-redux';\nimport {setBackendModeSignedInStatusAction} from '../reducers/BackendModeSignedInStatus';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport Link from '@material-ui/core/Link';\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\nimport AmpStoriesIcon from '@material-ui/icons/AmpStories';\nimport {\n\tFILE_TYPE,\n\tcheckNoOpenFileId,\n\tcheckSourceFileId,\n\tcheckViewFileId,\n\tNO_OPEN_FILE_ID\n} from '../util/FileIdAndTypeUtils';\nimport Button from '@material-ui/core/Button';\nimport SaveIcon from '@material-ui/icons/Save';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {parse as parseTagFilters} from '../lib/TagFiltersGrammar';\nimport BlockTaggingEditorExtension from '../editor_extension/BlockTagging';\nimport {TagFilteringPluginKey} from '../editor_extension/plugins/TagFiltering';\nimport {Selection, TextSelection} from 'prosemirror-state';\nimport {defer} from 'lodash';\nimport FileStorageSystemClient from '../backend/FileStorageSystemClient';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport {setToastAction, TOAST_SEVERITY} from \"../reducers/Toast\";\nimport store from \"../store\";\nimport {CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE, SET_SAVE_DIRTY_FLAG_ACTION_TYPE} from \"../reducers/CurrentOpenFileState\";\n\nconst TAG_FILTERS_INPUT_ID = 'tag_filters_input';\n\nconst DEFAULT_STATE = {\n\tmodifyingTagFilters: false,\n\tcurrentTagFiltersStr: '',\n\tcurrentParsedTagFiltersStr: '',\n\tsourceSavedTagFilters: {},\n};\n\nclass Navbar extends React.Component {\n\tstate = DEFAULT_STATE;\n\t\n\thandleSave = () => {\n    store.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE })\n\t\tif (checkSourceFileId(this.props.currentOpenFileId)) {\n\t\t\tFileStorageSystemClient.doSaveSourceContent(\n\t\t\t\tBlockTaggingEditorExtension.editor.value(true),\n\t\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\t).then(success => {\n\t\t\t\tif (success) {\n\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\tmessage: \"Saved source file\",\n\t\t\t\t\t\tseverity: TOAST_SEVERITY.SUCCESS,\n\t\t\t\t\t\topen: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\tmessage: \"Failed to save source file\",\n\t\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\t\topen: true\n          });\n          store.dispatch({ type: SET_SAVE_DIRTY_FLAG_ACTION_TYPE });\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (checkViewFileId(this.props.currentOpenFileId) && this.props.currentOpenFileId.viewType !== NO_OPEN_FILE_ID.viewType) {\n\t\t\tFileStorageSystemClient.doSaveViewSpec(\n\t\t\t\tthis.props.tagsInView,\n\t\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\t\tthis.props.currentOpenFileId.viewId,\n\t\t\t\tthis.props.currentOpenFileId.viewType,\n\t\t\t\tfalse,\n\t\t\t\t)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\tmessage: \"View saved\",\n\t\t\t\t\t\tseverity: TOAST_SEVERITY.SUCCESS,\n\t\t\t\t\t\topen: true\n\t\t\t\t\t});\n\t\t\t\t\tstore.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE });\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n          this.props.dispatchSetToastAction({\n            message: \"Failed to save view\",\n            severity: TOAST_SEVERITY.ERROR,\n            open: true\n          });\n          store.dispatch({ type: SET_SAVE_DIRTY_FLAG_ACTION_TYPE });\n        });\n\t\t}\n\t}\n\t\n\thandleCancelModifyingTagFilters = () => {\n\t\tconst input = document.getElementById(TAG_FILTERS_INPUT_ID);\n\t\tinput.value = this.state.currentTagFiltersStr;\n\t\tthis.setState({ modifyingTagFilters: false });\n\t};\n\t\n\thandleStartModifyingTagFilters = () => {\n\t\tthis.setState({ modifyingTagFilters: true });\n\t\tdefer(() => {\n\t\t\tconst input = document.getElementById(TAG_FILTERS_INPUT_ID);\n\t\t\tinput.focus();\n\t\t\tinput.setSelectionRange(input.value.length, input.value.length);\n\t\t});\n\t};\n\t\n\thandleUnpersistCurrentTagFilters = () => {\n\t\tif (\n\t\t\t!this.state.currentTagFiltersStr ||\n\t\t\t!this.state.sourceSavedTagFilters.hasOwnProperty(this.state.currentTagFiltersStr)\n\t\t) { return false; }\n\t\tconst newSourceSavedTagFilters = {...this.state.sourceSavedTagFilters};\n\t\tdelete newSourceSavedTagFilters[this.state.currentTagFiltersStr];\n\t\tFileStorageSystemClient.doSetSourceSavedTagFilters(\n\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\tnewSourceSavedTagFilters,\n\t\t).then(success => {\n\t\t\tif (!success) {\n\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Failed to set source saved tag filters\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse { this.setState({ sourceSavedTagFilters: newSourceSavedTagFilters }); }\n\t\t});\n\t};\n\t\n\thandlePersistNewSavedTagFilters = () => {\n\t\tif (\n\t\t\t!this.state.currentTagFiltersStr ||\n\t\t\tthis.state.sourceSavedTagFilters.hasOwnProperty(this.state.currentTagFiltersStr)\n\t\t) { return false; }\n\t\tconst newSourceSavedTagFilters = {...this.state.sourceSavedTagFilters};\n\t\tnewSourceSavedTagFilters[this.state.currentTagFiltersStr] = this.state.currentParsedTagFiltersStr;\n\t\tFileStorageSystemClient.doSetSourceSavedTagFilters(\n\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\tnewSourceSavedTagFilters,\n\t\t).then(success => {\n\t\t\tif (!success) {\n\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Failed to set source saved tag filters\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse { this.setState({ sourceSavedTagFilters: newSourceSavedTagFilters }); }\n\t\t});\n\t};\n\t\n\thandleApplyTagFilters = () => {\n\t\tlet tagFilters = null;\n\t\tconst tagFiltersStr = document.getElementById(TAG_FILTERS_INPUT_ID).value.trim();\n\t\tif (tagFiltersStr) {\n\t\t\ttagFilters = parseTagFilters(tagFiltersStr);\n\t\t\tif (!tagFilters) {\n\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Invalid tag filters\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tdocument.getElementById(TAG_FILTERS_INPUT_ID).value = tagFiltersStr;\n\t\tconst parsedTagFiltersStr = JSON.stringify(tagFilters);\n\t\tconst oldParsedTagFiltersStr = this.state.currentParsedTagFiltersStr;\n\t\tthis.setState({ currentTagFiltersStr: tagFiltersStr, currentParsedTagFiltersStr: parsedTagFiltersStr });\n\t\tif (parsedTagFiltersStr === oldParsedTagFiltersStr) { return true; }\n\t\tif(BlockTaggingEditorExtension.editor !== undefined){\n\t\t\tBlockTaggingEditorExtension.editor.view.dispatch(\n\t\t\t\tBlockTaggingEditorExtension.editor.view.state.tr.setMeta(TagFilteringPluginKey, tagFilters)\n\t\t\t\t\t.setSelection(\n\t\t\t\t\t\ttagFilters\n\t\t\t\t\t\t\t? TextSelection.create(BlockTaggingEditorExtension.editor.view.state.doc, 0, 0)\n\t\t\t\t\t\t\t: Selection.atStart(BlockTaggingEditorExtension.editor.view.state.doc)\n\t\t\t\t\t).scrollIntoView()\n\t\t\t);\n\t\t\tdefer(() => {\n\t\t\t\tif (tagFilters) { BlockTaggingEditorExtension.editor.view.dom.blur(); }\n\t\t\t\telse { BlockTaggingEditorExtension.editor.view.focus(); }\n\t\t\t});\n\t\t}\n\t\treturn true;\n\t};\n\t\n\tchangeFile = async () => {\n\t\tif (checkSourceFileId(this.props.currentOpenFileId)) {\n\t\t\tFileStorageSystemClient.doGetSourceSavedTagFilters(this.props.currentOpenFileId.sourceId)\n\t\t\t\t.then(sourceSavedTagFilters => {\n\t\t\t\t\tif (!sourceSavedTagFilters) {\n\t\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\t\tmessage: \"Failed to retrieve source saved tag filters\",\n\t\t\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\t\t\topen: true\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet filters = {}\n\t\t\t\t\t\tsourceSavedTagFilters.forEach(element => {\n\t\t\t\t\t\t\tfilters[element] = element;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setState({sourceSavedTagFilters: filters});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\t\n\tcomponentDidMount = () => {\n\t\tthis.changeFile();\n\t};\n\t\n\tcomponentDidUpdate = prevProps => {\n\t\tif(this.props.currentOpenFileName.viewName === '' && prevProps.currentOpenFileId.sourceId !== this.props.currentOpenFileId.sourceId){\n\t\t\tdocument.getElementById(TAG_FILTERS_INPUT_ID).value = \"\";\n\t\t\tthis.handleApplyTagFilters();\n\t\t\tthis.setState({ sourceSavedTagFilters: {} });\n\t\t\tthis.changeFile();\n\t\t}\n\t};\n\t\n\trender = () => {\n\t\tconst noOpenFileIdCheck = checkNoOpenFileId(this.props.currentOpenFileId);\n\t\tconst currentTagFiltersSaved =this.state.sourceSavedTagFilters.hasOwnProperty(this.state.currentTagFiltersStr);\n\t\treturn(\n\t\t\t<AppBar position=\"static\" class=\"custom-navbar\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<img className={\"menuButton\"} src={require('../images/logo.png')} style={{width: \"40px\", marginRight: \"10px\"}} alt={\"MENU\"}/>\n\t\t\t\t\t<Typography variant=\"h5\" style={{fontFamily:\"Bungee\", color:\"#F5F0E1\"}}>\n\t\t\t\t\t\tYADA\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<div style={{flexGrow: 1, marginLeft: \"150px\"}}>\n\t\t\t\t\t\t{this.props.currentOpenFileName.sourceName === '' ? null :\n\t\t\t\t\t\t\t<Breadcrumbs aria-label=\"breadcrumb\" color=\"secondary\" style={{marginRight: \"10px\", float: \"left\", border:\"1px solid #F5F0E1\", borderRadius: \"10px\", padding: \"8px\"}}>\n\t\t\t\t\t\t\t\t<Link color=\"inherit\" style={{ color: \"#F5F0E1\",}}>\n\t\t\t\t\t\t\t\t\t<DescriptionIcon color=\"secondary\"/>\n\t\t\t\t\t\t\t\t\t{this.props.currentOpenFileName.sourceName.length <= 11 ?  this.props.currentOpenFileName.sourceName : (this.props.currentOpenFileName.sourceName.substring(0,11) + \"...\")}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t{this.props.currentOpenFileName.viewName === '' ? null :\n\t\t\t\t\t\t\t\t\t<Link color=\"inherit\" style={{color: \"#F5F0E1\"}}>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t(this.props.currentOpenFileId.viewType === FILE_TYPE.CARD_VIEW) ?\n\t\t\t\t\t\t\t\t\t\t\t\t<AmpStoriesIcon color=\"secondary\"/>:\n\t\t\t\t\t\t\t\t\t\t\t\t(this.props.currentOpenFileId.viewType === FILE_TYPE.TEXT_VIEW) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextFieldsIcon color=\"secondary\"/> :\n\t\t\t\t\t\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t{this.props.currentOpenFileName.viewName}\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</Breadcrumbs>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\ttitle=\"save\"\n\t\t\t\t\t\t\tdisabled={noOpenFileIdCheck || !this.props.saveDirtyFlag}\n\t\t\t\t\t\t\tonClick={this.handleSave}\n\t\t\t\t\t\t\tstartIcon={<SaveIcon />}\n\t\t\t\t\t\t\tstyle= {{ borderRadius: \"10px\",paddingTop: \"8px\", paddingBottom: \"8px\", float: \"left\"}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.props.currentOpenFileName.viewName === '' ?\n\t\t\t\t\t\t\t\t<div style={{backgroundColor: \"rgba(245, 240, 225, 0.8)\", marginLeft: \"250px\", width: \"50vw\", borderRadius: \"10px\", padding: \"5px\"}}>\n\t\t\t\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={1}>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{marginTop: \"3px\", marginLeft: \"20px\"}}>\n\t\t\t\t\t\t\t\t\t\t\t\t<SearchIcon color=\"primary\"/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={10}>\n\t\t\t\t\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.currentTagFiltersStr}\n\t\t\t\t\t\t\t\t\t\t\t\tid={TAG_FILTERS_INPUT_ID}\n\t\t\t\t\t\t\t\t\t\t\t\tfreeSolo\n\t\t\t\t\t\t\t\t\t\t\t\toptions={Object.entries(this.state.sourceSavedTagFilters)\n\t\t\t\t\t\t\t\t\t\t\t\t\t.map(([tagFiltersStr, _parsedTagFiltersStr]) => tagFiltersStr)}\n\t\t\t\t\t\t\t\t\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...params}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Search with Tags: ( #{tag1} | !( #{tag2} ) ) & #{tag3}\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{margin:\"0%\"}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmargin=\"normal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"standard\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(event, value, reason) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({currentTagFiltersStr : value});\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleStartModifyingTagFilters();\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (reason === 'clear'){\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(TAG_FILTERS_INPUT_ID).value = '';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleApplyTagFilters();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={event => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (this.handleApplyTagFilters()) { this.setState({ modifyingTagFilters: false }); }\n\t\t\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst input = event.target;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefer(() => { input.focus(); });\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyDown={event => { if (event.key === 'Escape') { this.handleCancelModifyingTagFilters(); } }}\n\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={event => { if (event.key === 'Enter') { event.target.blur(); } }}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item xs={1}>\n\t\t\t\t\t\t\t\t\t\t\t<div style={{float: \"right\"}}>\n\t\t\t\t\t\t\t\t\t\t\t\t{ (this.state.modifyingTagFilters) ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t(this.state.currentTagFiltersStr === '') ? null :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(currentTagFiltersSaved) ?\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton title=\"Unpersist Filter\" style={{padding: \"0px\", paddingRight: \"10px\", paddingTop: \"5px\"}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<RemoveCircleIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(TAG_FILTERS_INPUT_ID).value = \"\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleUnpersistCurrentTagFilters();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handleApplyTagFilters();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton> :\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton title=\"Persist Filter\" style={{padding: \"0px\", paddingRight: \"10px\", paddingTop: \"5px\"}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SaveIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.handlePersistNewSavedTagFilters();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tedge=\"end\"\n\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\tstyle={{float: \"right\"}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AccountCircleIcon color=\"secondary\"/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t)\n\t}\n}\n\nexport default connect(\n\tstate => ({\n\t\tcurrentOpenFileId: state.currentOpenFileId,\n\t\tcurrentOpenFileName: state.currentOpenFileName,\n\t\tbackendModeSignedInStatus: state.backendModeSignedInStatus,\n\t\ttagsInView: state.tagsInView,\n\t\tsaveDirtyFlag: state.saveDirtyFlag\n\t}),\n\tdispatch => ({\n\t\tdispatchSetBackendModeSignedInStatusAction: mode => dispatch(setBackendModeSignedInStatusAction(mode)),\n\t\tdispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n\t}),\n)(Navbar);\n","import React from 'react';\nimport RichMarkdownEditor from 'rich-markdown-editor';\nimport BootstrapCard from 'react-bootstrap/Card';\nimport ReactCardFlip from 'react-card-flip';\n\nclass Card extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisFlipped: false,\n\t\t\tkey: this.props.content[\"index\"],\n\t\t\tfront: this.props.content[\"front\"],\n\t\t\tback: this.props.content[\"back\"]\n\t\t};\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t\tthis.createBootstrapCard = this.createBootstrapCard.bind(this);\n\t}\n\t\n\thandleClick(e) {\n\t\te.preventDefault();\n\t\tthis.setState(prevState => ({ isFlipped: !prevState.isFlipped }));\n\t}\n\t\n\tcreateBootstrapCard(key, json) {\n\t\treturn (\n\t\t\t<BootstrapCard\n\t\t\t\tkey={key}\n\t\t\t\ttext=\"black\"\n\t\t\t\tclassName=\"BootstrapCard\"\n\t\t\t\tonClick={this.handleClick}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tjson &&\n\t\t\t\t\t<RichMarkdownEditor\n\t\t\t\t\t\tclassName=\"Card\"\n\t\t\t\t\t\treadOnly={true}\n\t\t\t\t\t\tkey={`card${key}`}\n\t\t\t\t\t\tdefaultValue={JSON.stringify(json)}\n\t\t\t\t\t\tjsonStrValue={true}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</BootstrapCard>\n\t\t);\n\t}\n\t\n\trender = () => {\n\t\tconst content = this.props.content;\n\t\tif (content !== undefined) {\n\t\t\tconst key = content[\"index\"];\n\t\t\tconst front = content[\"front\"];\n\t\t\tconst back = content[\"back\"];\n\t\t\treturn (\n\t\t\t\t<ReactCardFlip isFlipped={this.state.isFlipped} flipDirection=\"vertical\">\n\t\t\t\t\t{this.createBootstrapCard(key, front)}\n\t\t\t\t\t{this.createBootstrapCard(key, back)}\n\t\t\t\t</ReactCardFlip>\n\t\t\t);\n\t\t} else { return null; }\n\t};\n}\n\nexport default Card;\n","import React from 'react';\nimport Carousel from 'react-material-ui-carousel'\nimport Typography from '@material-ui/core/Typography';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport Chip from '@material-ui/core/Chip';\n\nclass StudyView extends React.Component {\n    state = {\n        currentNumber : 0,\n        startIndex: 0,\n        cards: this.props.cards\n    }\n\n    shuffleCards = () => {\n        let shuffledCards = this.state.cards;\n        let i = shuffledCards.length - 1;\n        while(i > 0){\n            const j = Math.floor(Math.random() * i)\n            const temp = shuffledCards[i]\n            shuffledCards[i] = shuffledCards[j]\n            shuffledCards[j] = temp\n            i--\n        }\n        this.setState({cards: shuffledCards, startIndex: 3});\n    }\n\n    render = () => \n       <div>\n        <Carousel\n            navButtonsAlwaysVisible = {true}\n            indicators={false}\n            animation=\"slide\"\n            autoPlay = {false}\n            interval= {10000}\n            index={this.state.startIndex}\n            next = {() => {this.setState({currentNumber: ((this.state.currentNumber + 1) % this.state.cards.length)})}}\n            prev = {() => {this.setState({currentNumber: ((this.state.currentNumber - 1) % this.state.cards.length)})}}\n        >\n            {this.state.cards.map((card, i) => <div>{card}</div>)}\n        </Carousel>\n        <div style={{display: \"flex\", flexDirection: \"row\", flexWrap: \"nowrap\", justifyContent: \"space-between\"}}>\n                <div /> \n                <Typography variant=\"h6\" style={{color:\"#1E3D59\"}}>\n                    {this.state.currentNumber + 1}/{this.state.cards.length}\n                </Typography>\n                <Chip\n                    label=\"Shuffle\"\n                    clickable\n                    color=\"primary\"\n                    onDelete={this.shuffleCards}\n                    onClick={this.shuffleCards}\n                    deleteIcon={<ShuffleIcon />}\n                    variant=\"outlined\"\n                />\n        </div>\n        </div>\n};\n\nexport default StudyView;","import styled from 'styled-components'\nimport React from 'react';\nimport {Droppable, Draggable} from 'react-beautiful-dnd';\nimport {THEME} from \"../../App\";\nimport {FILE_TYPE} from \"../../util/FileIdAndTypeUtils\";\nimport {TAG_HOLDERS} from \"./TagEditor\";\n\nclass Tag extends React.Component {\n\trender = () => {\n\t\tconst Container = styled.div`\n\t\t\tborder: 1px solid lightgrey;\n\t\t\tborder-radius: 10px;\n\t\t\tpadding: 8px;\n\t\t\tmargin-bottom: 8px;\n\t\t\tbackground-color: ${props => (props.isDragging ? THEME.palette.secondary.dark : THEME.palette.secondary.light)};\n\t\t`;\n\t\tconst TagId = styled.h5``;\n\t\tconst Content = styled.div``\n\t\treturn (\n\t\t\t<Draggable draggableId={this.props.tagId} index={this.props.index}>\n\t\t\t\t{(provided, snapshot) => (\n\t\t\t\t\t<Container\n\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t{...provided.draggableProps}\n\t\t\t\t\t\t{...provided.dragHandleProps}\n\t\t\t\t\t\tisDragging={snapshot.isDragging}\n\t\t\t\t\t>\n\t\t\t\t\t\t<TagId>{this.props.tagInfo[\"tag_name\"]}</TagId>\n\t\t\t\t\t\t<Content>{this.props.tagInfo.preview}</Content>\n\t\t\t\t\t</Container>\n\t\t\t\t)}\n\t\t\t</Draggable>\n\t\t);\n\t};\n}\n\nclass InnerTagList extends React.Component {\n\t// performance optimization to prevent unnecessary renders\n\tshouldComponentUpdate(nextProps, nextState, nextContext) {\n\t\treturn nextProps.tagData !== this.props.tagData;\n\t}\n\t\n\trender() {\n\t\tconsole.log(this.props);\n\t\tconst tagList = [];\n\t\tconst tagIds = Object.keys(this.props.tagData);\n\t\tfor (let i = 0; i < tagIds.length; ++i) {\n\t\t\tconst tagId = tagIds[i];\n\t\t\ttagList.push(<Tag key={tagId} tagId={tagId} index={i} tagInfo={this.props.tagData[tagId]}/>);\n\t\t\tif (this.props.viewType === FILE_TYPE.CARD_VIEW && this.props.columnId === TAG_HOLDERS.IN_VIEW) {\n\t\t\t\tif (i % 2 === 1 && i !== tagIds.length-1) {\n\t\t\t\t\ttagList.push(\n\t\t\t\t\t\t<hr style={{ color: THEME.palette.primary.main, backgroundColor: THEME.palette.primary.main, height: 1 }} />\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tagList;\n\t}\n}\n\nclass DragDropColumn extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// used to maintain scroll when rendering updates to tag list\n\t\tthis.tagListRef = React.createRef();\n\t}\n\t\n\tgetSnapshotBeforeUpdate(prevProps, prevState) {\n\t\tconst list = this.tagListRef.current;\n\t\treturn list.scrollHeight - list.scrollTop;\n\t}\n\t\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tif (snapshot !== null) {\n\t\t\tconst list = this.tagListRef.current;\n\t\t\tlist.scrollTop = list.scrollHeight - snapshot;\n\t\t}\n\t}\n\t\n\trender = () => {\n\t\tconst Container = styled.div`\n\t\t\tborder: 1px solid lightgrey;\n\t\t\tborder-radius: 10px;\n\t\t\tpadding: 8px;\n\t\t\tmargin-top: 10px;\n\t\t\tmargin-bottom: 10px;\n\t\t\ttransition: background-color 0.2s ease;\n\t\t\tbackground-color: ${props => (props.isDraggingOver) ? THEME.palette.grey[300] : THEME.palette.grey[100]};\n\t\t`;\n\t\tconst Title = styled.h3`\n\t\t\tpadding: 8px;\n\t\t`;\n\t\tconst DroppableRegion = styled.div`\n\t\t\tpadding: 8px;\n\t\t`;\n\t\tconst TagList = styled.div`\n\t\t\toverflow-x: hidden;\n\t\t\toverflow-y: auto;\n\t\t\theight: 200px;\n\t\t\tpadding-bottom: 30px;\n\t\t`;\n\n\t\treturn (\n\t\t\t<Droppable droppableId={this.props.column.id}>\n\t\t\t\t{(provided, snapshot) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Container isDraggingOver={snapshot.isDraggingOver}>\n\t\t\t\t\t\t\t<Title>{this.props.column.title}</Title>\n\t\t\t\t\t\t\t\t<DroppableRegion\n\t\t\t\t\t\t\t\t\tref={provided.innerRef}\n\t\t\t\t\t\t\t\t\t{...provided.droppableProps}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<TagList ref={this.tagListRef}>\n\t\t\t\t\t\t\t\t\t\t<InnerTagList viewType={this.props.viewType} columnId={this.props.column.id} tagData={this.props.tagData}/>\n\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\n\t\t\t\t\t\t\t\t\t</TagList>\n\t\t\t\t\t\t\t\t</DroppableRegion>\n\t\t\t\t\t\t</Container>\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t</Droppable>\n\t\t);\n\t};\n}\n\nexport default DragDropColumn;\n","import React from 'react';\nimport {connect} from 'react-redux';\nimport Container from 'react-bootstrap/Container'\nimport DragDropColumn from './DragDropColumn';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport {DragDropContext} from 'react-beautiful-dnd';\nimport {setTagsInViewAction} from '../../reducers/SetTagsInView';\nimport {SET_SAVE_DIRTY_FLAG_ACTION_TYPE} from \"../../reducers/CurrentOpenFileState\";\n\nexport const TAG_HOLDERS = {\n\tAVAILABLE: \"tags_available\",\n\tIN_VIEW: \"tags_in_view\"\n}\n\nclass TagEditor extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst tagsInView = new Set(this.props.tagsInView);\n\t\tconst availableTags = Object.keys(this.props.allTagsData).filter(t => !tagsInView.has(t));\n\t\t\n\t\t// parse nodes to obtain preview\n\t\tfunction getPreview(node) {\n\t\t\tfor (let i = 0; i < node.content.length; ++i) {\n\t\t\t\tconst contentNode = node.content[i];\n\t\t\t\tif (contentNode.type === \"text\") {\n\t\t\t\t\treturn contentNode.text;\n\t\t\t\t} else if (contentNode) {\n\t\t\t\t\tconst recurseResponse = getPreview(contentNode);\n\t\t\t\t\tif (recurseResponse !== \"\") return recurseResponse;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\";\n\t\t}\n\t\t\n\t\tconst tagData = this.props.allTagsData;\n\t\tObject.keys(tagData).forEach(tagId => {\n\t\t\tconst preview = getPreview(tagData[tagId].content);\n\t\t\tconst maxPreviewLength = 50;\n\t\t\ttagData[tagId][\"preview\"] = preview.substring(0, maxPreviewLength);\n\t\t\tif (preview.length > maxPreviewLength) {\n\t\t\t\ttagData[tagId][\"preview\"] += \" . . .\";\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.state = {\n\t\t\ttagData: tagData,\n\t\t\tcolumns: {\n\t\t\t\ttags_in_view: {\n\t\t\t\t\tid: TAG_HOLDERS.IN_VIEW,\n\t\t\t\t\ttitle: \"Tags in View\",\n\t\t\t\t\ttagIds: this.props.tagsInView\n\t\t\t\t},\n\t\t\t\ttags_available: {\n\t\t\t\t\tid: TAG_HOLDERS.AVAILABLE,\n\t\t\t\t\ttitle: \"Available Tags\",\n\t\t\t\t\ttagIds: availableTags\n\t\t\t\t},\n\t\t\t},\n\t\t\tcolumnOrder: ['tags_in_view', 'tags_available']\n\t\t};\n\t}\n\t\n\tonDragEnd = result => {\n\t\tconst { destination, source, draggableId } = result;\n\t\tif (!destination) return;\n\t\tif (destination.droppableId === source.droppableId && destination.index === source.index) return;\n\t\t\n\t\tlet newState = {}\n\t\tif (destination.droppableId === source.droppableId) {\n\t\t\tconst column = this.state.columns[source.droppableId]\n\t\t\tconst newTagIds = Array.from(column.tagIds);\n\t\t\tnewTagIds.splice(source.index, 1);\n\t\t\tnewTagIds.splice(destination.index, 0, draggableId)\n\t\t\t\n\t\t\tconst newColumn = {\n\t\t\t\t...column,\n\t\t\t\ttagIds: newTagIds\n\t\t\t}\n\t\t\t\n\t\t\tnewState = {\n\t\t\t\t...this.state,\n\t\t\t\tcolumns: {\n\t\t\t\t\t...this.state.columns,\n\t\t\t\t\t[newColumn.id]: newColumn\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\tconst start = this.state.columns[source.droppableId];\n\t\t\tconst finish = this.state.columns[destination.droppableId];\n\t\t\tconst startTagIds = Array.from(start.tagIds);\n\t\t\tstartTagIds.splice(source.index, 1);\n\t\t\tconst newStart = {\n\t\t\t\t...start,\n\t\t\t\ttagIds: startTagIds\n\t\t\t};\n\t\t\t\n\t\t\tconst finishTagIds = Array.from(finish.tagIds);\n\t\t\tfinishTagIds.splice(destination.index, 0, draggableId);\n\t\t\tconst newFinish = {\n\t\t\t\t...finish,\n\t\t\t\ttagIds: finishTagIds\n\t\t\t};\n\t\t\t\n\t\t\tnewState = {\n\t\t\t\t...this.state,\n\t\t\t\tcolumns: {\n\t\t\t\t\t...this.state.columns,\n\t\t\t\t\t[newStart.id]: newStart,\n\t\t\t\t\t[newFinish.id]: newFinish\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tthis.props.setTagsInView(newState.columns.tags_in_view.tagIds);\n\t\tthis.setState(newState);\n\t}\n\t\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tif (prevProps.tagsInView !== this.props.tagsInView) {\n\t\t\tif (!this.props.saveDirtyFlag) { this.props.dispatchSetSaveDirtyFlagAction(); }\n\t\t\tconst tagsInView = new Set(this.props.tagsInView);\n\t\t\tconst availableTags = Object.keys(this.props.allTagsData).filter(t => !tagsInView.has(t));\n\t\t\tconst newState = Object.assign({}, this.state);\n\t\t\tnewState.columns.tags_in_view.tagIds = tagsInView;\n\t\t\tnewState.columns.tags_available.tagIds = availableTags;\n\t\t\tthis.setState(newState);\n\t\t}\n\t}\n\t\n\trender = () => {\n\t\treturn (\n\t\t\t<DragDropContext onDragEnd={this.onDragEnd}>\n\t\t\t\t<Container>\n\t\t\t\t\t<Row className=\"justify-content-md-center\">\n\t\t\t\t\t\t{this.state.columnOrder.map(columnId => {\n\t\t\t\t\t\t\tconst column = this.state.columns[columnId];\n\t\t\t\t\t\t\t// Generate subdict here\n\t\t\t\t\t\t\tlet tagDataInColumn = {};\n\t\t\t\t\t\t\tfor (const tagId of column.tagIds) {\n\t\t\t\t\t\t\t\ttagDataInColumn[tagId] = this.state.tagData[tagId];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Col key={column.id} md=\"12\" lg=\"6\">\n\t\t\t\t\t\t\t\t\t<DragDropColumn\n\t\t\t\t\t\t\t\t\t\tviewType={this.props.viewType}\n\t\t\t\t\t\t\t\t\t\tkey={column.id}\n\t\t\t\t\t\t\t\t\t\tcolumn={column}\n\t\t\t\t\t\t\t\t\t\ttagData={tagDataInColumn}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</Row>\n\t\t\t\t</Container>\n\t\t\t</DragDropContext>\n\t\t);\n\t};\n}\n\nexport default connect(\n\tstate => ({ tagsInView: state.tagsInView, saveDirtyFlag: state.saveDirtyFlag }),\n\tdispatch => ({\n\t\tsetTagsInView: tagsInView => dispatch(setTagsInViewAction(tagsInView)),\n\t\tdispatchSetSaveDirtyFlagAction: () => dispatch({ type: SET_SAVE_DIRTY_FLAG_ACTION_TYPE })\n\t}),\n)(TagEditor);\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './CardDeck.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport Container from 'react-bootstrap/Container'\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from './Card';\nimport StudyView from './StudyView';\nimport TagEditor from '../ViewComponents/TagEditor';\nimport {setTagsInViewAction} from '../../reducers/SetTagsInView';\nimport FileStorageSystemClient from \"../../backend/FileStorageSystemClient\";\nimport {FILE_TYPE} from \"../../util/FileIdAndTypeUtils\";\nimport {setToastAction, TOAST_SEVERITY} from \"../../reducers/Toast\";\nimport store from \"../../store\";\nimport {CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE} from \"../../reducers/CurrentOpenFileState\";\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\nclass CardDeck extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tallTagsData: props.data.allTagsData,\n\t\t\tstudySwitch: false,\n\t\t}\n\t\tthis.props.setTagsInView(props.data.tagsInView);\n\t}\n\t\n\tkeydownHandler = (event) => {\n\t\tif ((window.navigator.platform.match(\"Mac\") ? event.metaKey : event.ctrlKey)  && event.keyCode === 83) {\n\t\t\tevent.preventDefault();\n\t\t\tFileStorageSystemClient.doSaveViewSpec(\n\t\t\t\tthis.props.tagsInView,\n\t\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\t\tthis.props.currentOpenFileId.viewId,\n\t\t\t\tFILE_TYPE.CARD_VIEW,\n\t\t\t\tfalse,\n\t\t\t)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\tmessage: \"Saved view\",\n\t\t\t\t\t\tseverity: TOAST_SEVERITY.SUCCESS,\n\t\t\t\t\t\topen: true\n\t\t\t\t\t});\n\t\t\t\t\tstore.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE });\n\t\t\t\t})\n\t\t\t\t.catch(() => this.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Failed to save view\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t}));\n\t\t}\n\t};\n\t\n\tconstructDoc = (tagId) => {\n\t\tconst node = this.state.allTagsData[tagId][\"content\"];\n\t\treturn {\n\t\t\t\"type\": \"doc\",\n\t\t\t\"content\": [node]\n\t\t};\n\t};\n\t\n\tconstructCard = (index) => {\n\t\tconst cardContent = { \"index\": index };\n\t\tcardContent[\"front\"] = this.constructDoc(this.props.tagsInView[index]);\n\t\tif (index + 1 < this.props.tagsInView.length) {\n\t\t\tcardContent[\"back\"] = this.constructDoc(this.props.tagsInView[index+1]);\n\t\t} else { cardContent[\"back\"] = null; }\n\t\treturn <Card content={cardContent} />;\n\t};\n\tcomponentDidMount = () => {\n\t\tdocument.addEventListener('keydown',this.keydownHandler);\n\t};\n\tcomponentDidUpdate = prevProps => {\n\t\tif (prevProps.tagsInView !== this.props.tagsInView) {\n\t\t\tthis.props.setTagsInView(this.props.tagsInView);\n\t\t}\n\t};\n\tcomponentWillUnmount = () => { document.removeEventListener('keydown',this.keydownHandler); };\n\t\n\trender = () => {\n\t\tif (!this.state.allTagsData || this.props.tagsInView == null) {\n\t\t\treturn (\n\t\t\t\t<Container className=\"viewContainer\">\n\t\t\t\t\t<h5>Loading Card Deck ...</h5>\n\t\t\t\t</Container>\n\t\t\t);\n\t\t} else {\n\t\t\tconst cards = [];\n\t\t\tif(this.state.studySwitch) {\n\t\t\t\tfor (let i = 0; i < this.props.tagsInView.length; i+=2) {\n\t\t\t\t\tcards.push(this.constructCard(i));\n\t\t\t\t}\n\t\t\t}else {\n\t\t\t\tfor (let i = 0; i < this.props.tagsInView.length; i+=4) {\n\t\t\t\t\tcards.push(\n\t\t\t\t\t\t<Row key={`row_${i%4}`} className=\"justify-content-md-center\">\n\t\t\t\t\t\t\t<Col lg=\"12\" xl=\"6\">\n\t\t\t\t\t\t\t\t{this.constructCard(i)}\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col lg=\"12\" xl=\"6\">\n\t\t\t\t\t\t\t\t{(i + 2 < this.props.tagsInView.length) && this.constructCard(i + 2)}\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Container className=\"viewContainer\">\n\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\tchecked={this.state.studySwitch}\n\t\t\t\t\t\t\tonChange={() => {this.setState({studySwitch: !this.state.studySwitch})}}\n\t\t\t\t\t\t\tname=\"checkedB\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabel=\"Study Mode\"\n\t\t\t\t\t/>\n\t\t\t\t\t{this.state.studySwitch ? <StudyView cards={cards}/> : \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<TagEditor viewType={FILE_TYPE.CARD_VIEW} allTagsData={this.state.allTagsData} tagsInView={this.props.tagsInView} />\n\t\t\t\t\t\t\t{cards}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</Container>\n\t\t\t);\n\t\t}\n\t};\n}\n\nexport default connect(\n\tstate => ({ tagsInView: state.tagsInView, currentOpenFileId: state.currentOpenFileId }),\n\tdispatch => ({\n\t\tsetTagsInView: tagsInView => dispatch(setTagsInViewAction(tagsInView)),\n\t\tdispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n\t}),\n)(CardDeck);\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport './TextView.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport Container from 'react-bootstrap/Container'\nimport TagEditor from '../ViewComponents/TagEditor';\nimport {setTagsInViewAction} from '../../reducers/SetTagsInView';\nimport FileStorageSystemClient from \"../../backend/FileStorageSystemClient\";\nimport {FILE_TYPE} from \"../../util/FileIdAndTypeUtils\";\nimport RichMarkdownEditor from \"rich-markdown-editor\";\nimport {setToastAction, TOAST_SEVERITY} from \"../../reducers/Toast\";\nimport store from \"../../store\";\nimport {CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE} from \"../../reducers/CurrentOpenFileState\";\n\n\nclass TextView extends React.Component {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tallTagsData: props.data.allTagsData,\n\t\t}\n\t\tthis.props.setTagsInView(props.data.tagsInView);\n\t}\n\t\n\tkeydownHandler = (event) => {\n\t\tif ((window.navigator.platform.match(\"Mac\") ? event.metaKey : event.ctrlKey)  && event.keyCode === 83) {\n\t\t\tevent.preventDefault();\n\t\t\tFileStorageSystemClient.doSaveViewSpec(\n\t\t\t\tthis.props.tagsInView,\n\t\t\t\tthis.props.currentOpenFileId.sourceId,\n\t\t\t\tthis.props.currentOpenFileId.viewId,\n\t\t\t\tFILE_TYPE.TEXT_VIEW,\n\t\t\t\tfalse,\n\t\t\t\t)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\t\tmessage: \"Saved view\",\n\t\t\t\t\t\tseverity: TOAST_SEVERITY.SUCCESS,\n\t\t\t\t\t\topen: true\n\t\t\t\t\t});\n\t\t\t\t\tstore.dispatch({ type: CLEAR_SAVE_DIRTY_FLAG_ACTION_TYPE });\n\t\t\t\t})\n\t\t\t\t.catch(() => this.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Failed to save view\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t}));\n\t\t}\n\t};\n\t\n\tconstructTextView = () => {\n\t\treturn {\n\t\t\t\"type\": \"doc\",\n\t\t\t\"content\": this.props.tagsInView.map(t => this.state.allTagsData[t][\"content\"])\n\t\t};\n\t};\n\t\n\tcomponentDidMount = () => {\n\t\tdocument.addEventListener('keydown',this.keydownHandler);\n\t};\n\tcomponentDidUpdate = prevProps => {\n\t\tif (prevProps.tagsInView !== this.props.tagsInView) {\n\t\t\tthis.props.setTagsInView(this.props.tagsInView);\n\t\t}\n\t};\n\tcomponentWillUnmount = () => { document.removeEventListener('keydown',this.keydownHandler); };\n\t\n\trender = () => {\n\t\tif (!this.state.allTagsData || this.props.tagsInView == null) {\n\t\t\treturn (\n\t\t\t\t<Container className=\"viewContainer\">\n\t\t\t\t\t<h5>Loading Text View ...</h5>\n\t\t\t\t</Container>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<Container className=\"viewContainer\">\n\t\t\t\t\t<TagEditor viewType={FILE_TYPE.TEXT_VIEW} allTagsData={this.state.allTagsData} tagsInView={this.props.tagsInView} />\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.props.tagsInView.length > 0 &&\n\t\t\t\t\t\t<RichMarkdownEditor\n\t\t\t\t\t\t\tclassName=\"TextViewEditor\"\n\t\t\t\t\t\t\treadOnly={true}\n\t\t\t\t\t\t\tkey={\"text_view\"}\n\t\t\t\t\t\t\tdefaultValue={JSON.stringify(this.constructTextView())}\n\t\t\t\t\t\t\tjsonStrValue={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</Container>\n\t\t\t);\n\t\t}\n\t};\n}\n\nexport default connect(\n\tstate => ({ tagsInView: state.tagsInView, currentOpenFileId: state.currentOpenFileId }),\n\tdispatch => ({\n\t\tsetTagsInView: tagsInView => dispatch(setTagsInViewAction(tagsInView)),\n\t\tdispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n\t}),\n)(TextView);\n","import './ViewEditor.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {\n\tFILE_TYPE,\n\tNO_OPEN_FILE_ID\n} from \"../util/FileIdAndTypeUtils\";\nimport FileStorageSystemClient from \"../backend/FileStorageSystemClient\";\nimport {handleSetCurrentOpenFileId} from \"./Navigator\";\nimport CardDeck from \"./CardView/CardDeck\";\nimport TextView from \"./TextView/TextView\";\nimport {setTagsInViewAction} from \"../reducers/SetTagsInView\";\nimport {setToastAction, TOAST_SEVERITY} from \"../reducers/Toast\";\n\nconst DEFAULT_STATE = {\n\tsourceId: 0,\n\tviewId: 0,\n\tdata: null,\n\tfileType: FILE_TYPE.EMPTY\n};\n\nclass ViewEditor extends React.Component {\n\t\n\tstate = DEFAULT_STATE;\n\t\n\tchangeFile = async () => {\n\t\tFileStorageSystemClient.doGetView(this.props.currentOpenFileId).then(value => {\n\t\t\tif (value === null) {\n\t\t\t\tthis.props.dispatchSetToastAction({\n\t\t\t\t\tmessage: \"Failed to retrieve view\",\n\t\t\t\t\tseverity: TOAST_SEVERITY.ERROR,\n\t\t\t\t\topen: true\n\t\t\t\t})\n\t\t\t\thandleSetCurrentOpenFileId(NO_OPEN_FILE_ID);\n\t\t\t} else {\n\t\t\t\tthis.props.setTagsInView([]); // clear any tagsInView currently stored\n\t\t\t\tthis.setState({\n\t\t\t\t\tsourceId: this.props.currentOpenFileId.sourceId,\n\t\t\t\t\tviewId: this.props.currentOpenFileId.viewId,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttagsInView: value[\"view\"][\"order\"],\n\t\t\t\t\t\tallTagsData: value[\"tags\"][\"items\"]\n\t\t\t\t\t},\n\t\t\t\t\tfileType: this.props.currentOpenFileId.viewType\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\t\n\tcomponentDidMount = () => {\n\t\tthis.changeFile().then(() => console.log(\"Mounted view file\"));\n\t};\n\tcomponentDidUpdate = prevProps => {\n\t\tif (\n\t\t\tprevProps.currentOpenFileId.sourceId !== this.props.currentOpenFileId.sourceId ||\n\t\t\tprevProps.currentOpenFileId.viewId !== this.props.currentOpenFileId.viewId\n\t\t) {\n\t\t\tthis.changeFile().then(() => console.log(\"Updated view file\"));\n\t\t}\n\t};\n\t\n\trender = () => {\n\t\tif (this.state.fileType === FILE_TYPE.CARD_VIEW) {\n\t\t\treturn <CardDeck data={this.state.data}/>;\n\t\t} else if (this.state.fileType === FILE_TYPE.TEXT_VIEW) {\n\t\t\treturn <TextView data={this.state.data}/>;\n\t\t}\n\t\treturn null;\n\t};\n}\n\nexport default connect(\n\tstate => ({ currentOpenFileId: state.currentOpenFileId }),\n\tdispatch => ({\n\t\tsetTagsInView: tagsInView => dispatch(setTagsInViewAction(tagsInView)),\n\t\tdispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n\t}),\n)(ViewEditor);\n\n","import './Editor.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport SourceEditorWithTagFilters from \"./SourceEditorWithTagFiltersInput\";\nimport {\n\tcheckSourceFileId,\n\tcheckViewFileId,\n\tFILE_TYPE,\n} from \"../util/FileIdAndTypeUtils\";\nimport ViewEditor from \"./ViewEditor\";\n\nconst DEFAULT_STATE = {\n\tfileType: FILE_TYPE.EMPTY,\n};\n\nclass EditorManager extends React.Component {\n\t\n\tstate = DEFAULT_STATE;\n\t\n\tchangeFile = () => {\n\t\tif (checkSourceFileId(this.props.currentOpenFileId)) {\n\t\t\tthis.setState({fileType: FILE_TYPE.SOURCE});\n\t\t} else if (checkViewFileId(this.props.currentOpenFileId)) {\n\t\t\tthis.setState({fileType: FILE_TYPE.CARD_VIEW});\n\t\t} else {\n\t\t\tthis.setState({fileType: FILE_TYPE.EMPTY});\n\t\t}\n\t};\n\t\n\t\n\tcomponentDidMount = () => {\n\t\tthis.changeFile();\n\t};\n\t\n\tcomponentDidUpdate = prevProps => {\n\t\tif (\n\t\t\tprevProps.currentOpenFileId.sourceId !== this.props.currentOpenFileId.sourceId ||\n\t\t\tprevProps.currentOpenFileId.viewId !== this.props.currentOpenFileId.viewId\n\t\t) {\n\t\t\tthis.changeFile();\n\t\t}\n\t};\n\t\n\trender = () => {\n\t\treturn (\n\t\t\t<div className=\"MainPane\">\n\t\t\t\t<div className=\"editor_container\">\n\t\t\t\t\t{\n\t\t\t\t\t\t(this.state.fileType === FILE_TYPE.EMPTY) ?\n\t\t\t\t\t\t\t<div className=\"placeholder_editor\">\n\t\t\t\t\t\t\t\t<h5>Click or create a new document from the left pane</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t:\n\t\t\t\t\t\t(this.state.fileType === FILE_TYPE.SOURCE) ?\n\t\t\t\t\t\t\t<SourceEditorWithTagFilters /> : <ViewEditor/>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t};\n};\n\nexport default connect(state => ({ currentOpenFileId: state.currentOpenFileId, currentOpenFileName: state.currentOpenFileName }))(EditorManager);\n","import './App.css';\nimport React from 'react';\nimport {connect} from 'react-redux';\nimport {\n  BACKEND_MODE_SIGNED_IN_STATUS,\n  getUserSignedInStatus,\n  setBackendModeSignedInStatusAction,\n} from './reducers/BackendModeSignedInStatus';\nimport LandingPage from './components/LandingPage';\nimport Navigator from './components/Navigator';\nimport Navbar from './components/Navbar';\nimport EditorManager from \"./components/EditorManager\";\nimport \"./components/LandingPage.css\"\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport {setToastAction, TOAST_CLEAR, TOAST_DURATION_MS} from \"./reducers/Toast\";\n\nexport const THEME = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#1E3D59'\n    },\n    secondary: {\n      main: '#F5F0E1'\n    }\n  }\n});\n\nclass App extends React.Component {\n\n  state = { mounted: false };\n\n  handleCloseToast = () => {\n    this.props.dispatchSetToastAction(TOAST_CLEAR);\n  }\n  \n  componentDidMount = () => {\n    if (this.props.backendModeSignedInStatus !== BACKEND_MODE_SIGNED_IN_STATUS.LOCAL_STORAGE) {\n      getUserSignedInStatus().then(backendModeSignedInStatus => {\n        this.props.dispatchSetBackendModeSignedInStatusAction(backendModeSignedInStatus);\n        this.setState({ mounted: true });\n      });\n    } else { this.setState({ mounted: true }); }\n  };\n  \n  render = () =>\n    <MuiThemeProvider theme={THEME}>\n    <React.Fragment>\n      {\n        this.state.mounted\n          ? (\n              this.props.backendModeSignedInStatus !== BACKEND_MODE_SIGNED_IN_STATUS.USER_SIGNED_OUT\n                ? <div className=\"App\">\n                    <div style={{flex: \"0 1 auto\"}}>\n                      <Navbar />\n                    </div>\n                      <div style={{flex: \"1 1 auto\", display: \"flex\"}}>\n                        <div style={{float: \"left\"}}>\n                            <Navigator />\n                        </div>\n                        <div style={{flexGrow: \"100\"}}>\n                            <EditorManager/>\n                        </div>\n                        {/*Global Snackbar: used for display toast messages to user*/}\n                        <Snackbar open={this.props.toast.open} autoHideDuration={TOAST_DURATION_MS} onClose={this.handleCloseToast}>\n                          <MuiAlert onClose={this.handleCloseToast} elevation={6} severity={this.props.toast.severity}>\n                            {this.props.toast.message}\n                          </MuiAlert>\n                        </Snackbar>\n                      </div>\n                    </div>\n                : <LandingPage />\n            )\n          : null\n      }\n      {/* <div className=\"NoApp\">\n        This app doesn't support mobile screen widths.\n      </div> */}\n    </React.Fragment>\n    </MuiThemeProvider>\n};\n\nexport default connect(\n  state => ({\n    backendModeSignedInStatus: state.backendModeSignedInStatus,\n    currentOpenFileId: state.currentOpenFileId,\n    currentOpenFileName: state.currentOpenFileName,\n    toast: state.toast,\n  }),\n  dispatch => ({\n    dispatchSetBackendModeSignedInStatusAction: mode => dispatch(setBackendModeSignedInStatusAction(mode)),\n    dispatchSetToastAction: toast => dispatch(setToastAction(toast)),\n  }),\n)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: {'Service-Worker': 'script'},\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport {render} from 'react-dom';\nimport {Provider} from 'react-redux';\nimport './index.css';\nimport App from './App';\nimport store from './store';\nimport * as serviceWorker from './serviceWorker';\n\nrender(\n  <React.StrictMode>\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap\" />\n    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" />\n    <link href=\"https://fonts.googleapis.com/css2?family=Bungee&display=swap\" rel=\"stylesheet\" /> \n    <link href=\"https://fonts.googleapis.com/css2?family=Signika:wght@300&display=swap\" rel=\"stylesheet\"></link>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}