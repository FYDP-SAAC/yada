(this.webpackJsonpyada=this.webpackJsonpyada||[]).push([[0],{165:function(e,t,n){e.exports=n(472)},174:function(e,t,n){},175:function(e,t,n){},472:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),l=n(34),i=(n(174),n(175),n(33)),s=n(36),c=n(35),u={type:"TOGGLE_EDITOR_READ_ONLY"},d={type:"TOGGLE_EDITOR_DARK_MODE"},p="CHANGE_FILE_NAME_KEY",g=function(e){return{type:"CHANGE_FILE_NAME_KEY",fileNameKey:e}},m="SET_TAG_FILTERS",f=function(e){return{type:"SET_TAG_FILTERS",tagFilters:e}},y=n(79),E=n.n(y);function h(e){return e[0]}var b={Lexer:void 0,ParserRules:[{name:"Main",symbols:["Expression"],postprocess:h},{name:"Expression",symbols:["Expression_"],postprocess:h},{name:"Expression",symbols:["Factor"],postprocess:h},{name:"Expression_",symbols:["Factor","_",{literal:"|",pos:30},"_","Expression"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"Factor",symbols:["Factor_"],postprocess:h},{name:"Factor",symbols:["Term"],postprocess:h},{name:"Factor_",symbols:["Term","_",{literal:"&",pos:60},"_","Factor"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"Term",symbols:["Not"],postprocess:h},{name:"Term",symbols:["Nested"],postprocess:h},{name:"Term",symbols:["Tag"],postprocess:h},{name:"Not$subexpression$1",symbols:["Nested"],postprocess:h},{name:"Not$subexpression$1",symbols:["Tag"],postprocess:h},{name:"Not",symbols:[{literal:"!",pos:92},"Not$subexpression$1"]},{name:"Nested",symbols:[{literal:"(",pos:110},"_","Expression","_",{literal:")",pos:118}],postprocess:function(e){return e[2]}},{name:"Tag$string$1",symbols:[{literal:"#"},{literal:"{"}],postprocess:function(e){return e.join("")}},{name:"Tag$ebnf$1",symbols:[/[^#{}]/]},{name:"Tag$ebnf$1",symbols:[/[^#{}]/,"Tag$ebnf$1"],postprocess:function(e){return[e[0]].concat(e[1])}},{name:"Tag",symbols:["Tag$string$1","Tag$ebnf$1",{literal:"}",pos:131}],postprocess:function(e){return[e[0],e[1].join(""),e[2]].join("")}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:[{literal:" ",pos:139},"_$ebnf$1"],postprocess:function(e){return[e[0]].concat(e[1])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(e){return null}}],ParserStart:"Main"},_=function(e){var t=null;if(e){var n=new E.a.Parser(E.a.Grammar.fromCompiled(b));try{n.feed(e.trim()),n.results.length>0&&(t=n.results)}catch(a){}}return t},I=localStorage.getItem("initialTagFilters")||"",v=_(I),F=localStorage.getItem("filesList"),T=new Set(F?JSON.parse(F):["notes"]);localStorage.setItem("filesList",JSON.stringify(Array.from(T)));var O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).TAG_FILTERS_INPUT_ID="tag_filters_input",e.FILE_EXPLORER_INPUT_ID="file_explorer_input",e.FILE_EXPLORER_LIST_ID="file_explorer_list",e.FILE_NAME_KEY_CHAR_REGEX=/\w/,e.state={tagFiltersText:I},e.handleApplyTagFilters=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=document.getElementById(e.TAG_FILTERS_INPUT_ID).value.trim();if(!n||a!==e.state.tagFiltersText){var r=null;!a||(r=_(a))?(t&&e.setState({tagFiltersText:a}),e.props.setTagFilters({text:a,expr:r})):document.getElementById(e.TAG_FILTERS_INPUT_ID).value=e.state.tagFiltersText}},e.handleTagFiltersKeyPress=function(t){"Enter"===t.key&&e.handleApplyTagFilters()},e.handleToggleEditorReadOnly=function(){document.getElementById(e.TAG_FILTERS_INPUT_ID).value=e.props.editorReadOnly?"":e.state.tagFiltersText,e.handleApplyTagFilters(!1,!1),e.props.toggleEditorReadOnly()},e.handleToggleEditorDarkMode=function(){return e.props.toggleEditorDarkMode()},e.handleFileExplorerKeyPress=function(t){"Enter"===t.key&&e.handleLoadFile(),1===t.key.length&&e.FILE_NAME_KEY_CHAR_REGEX.test(t.key)||t.preventDefault()},e.handleLoadFile=function(){var t=document.getElementById(e.FILE_EXPLORER_INPUT_ID).value.trim();if(t){var n=localStorage.getItem("filesList");localStorage.setItem("filesList",JSON.stringify(Array.from(new Set(n?JSON.parse(n):[]).add(t)))),e.props.changeFileNameKey(t),document.getElementById(e.TAG_FILTERS_INPUT_ID).value="",e.handleApplyTagFilters(!0,!1)}else document.getElementById(e.FILE_EXPLORER_INPUT_ID).value=e.props.fileNameKey},e.handleRemoveFile=function(){var t=document.getElementById(e.FILE_EXPLORER_INPUT_ID).value.trim();if(t!==e.props.fileNameKey){var n=localStorage.getItem("filesList"),a=new Set(n?JSON.parse(n):[]);a.delete(t)&&localStorage.removeItem("file_"+t),localStorage.setItem("filesList",JSON.stringify(Array.from(a)))}},e.render=function(){var t=localStorage.getItem("filesList"),n=(t?JSON.parse(t):[]).map((function(e){return r.a.createElement("option",{key:e},e)}));return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"SubHeader"},r.a.createElement("input",{type:"text",id:e.TAG_FILTERS_INPUT_ID,disabled:!e.props.editorReadOnly,placeholder:e.props.editorReadOnly?'TagFilters expr - e.g. "#{tag1} | !(#{t 2} & !(#{_3}))"':"TagFilters are only enabled in ReadOnly mode",defaultValue:e.props.editorReadOnly?e.state.tagFiltersText:"",onKeyPress:e.handleTagFiltersKeyPress}),r.a.createElement("button",{type:"button",disabled:!e.props.editorReadOnly,onClick:e.handleApplyTagFilters},"Apply TagFilters")),r.a.createElement("div",{className:"SubHeader"},r.a.createElement("input",{type:"text",id:e.FILE_EXPLORER_INPUT_ID,list:e.FILE_EXPLORER_LIST_ID,placeholder:"file name/key",defaultValue:e.props.fileNameKey,onKeyPress:e.handleFileExplorerKeyPress}),r.a.createElement("datalist",{id:e.FILE_EXPLORER_LIST_ID},n),r.a.createElement("button",{type:"button",onClick:e.handleLoadFile},"Load File"),r.a.createElement("button",{type:"button",onClick:e.handleRemoveFile},"Remove File")),r.a.createElement("div",{className:"SubHeader"},r.a.createElement("button",{type:"button",onClick:e.handleToggleEditorDarkMode},e.props.editorDarkMode?"Light":"Dark"," Theme"),r.a.createElement("button",{type:"button",onClick:e.handleToggleEditorReadOnly},"Make ",e.props.editorReadOnly?"Editable":"ReadOnly")))},e}return n}(r.a.Component),S=Object(l.b)((function(e){return{editorDarkMode:e.editorDarkMode,editorReadOnly:e.editorReadOnly,fileNameKey:e.fileNameKey}}),(function(e){return{toggleEditorDarkMode:function(){return e(d)},toggleEditorReadOnly:function(){return e(u)},changeFileNameKey:function(t){return e(g(t))},setTagFilters:function(t){return e(f(t))}}}))(O),N=n(59),L=n(56),R=n(80),k=n(58),x=n.n(k),D="709358329925-gic89ini15sgaenfrta1gshej1ik72jg.apps.googleusercontent.com",A=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getAccessToken=function(){return x.a.get("access_token")},e.isAuthenticated=function(){var t=!!e.getAccessToken();return t!==e.props.isLoggedIn&&e.props.login(t),t},e.login=function(t){var n=t.tokenObj;if(n){var a=new Date(n.expires_at);x.a.set("access_token",n.id_token,{expires:a}),e.props.login(!0)}},e.logout=function(t){x.a.set("access_token","",{expires:new Date}),e.props.login(!1)},e.handleLoginFailure=function(e){alert("Failed to log in")},e.handleLogoutFailure=function(e){alert("Failed to log out")},e}return Object(L.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,this.isAuthenticated()?r.a.createElement(R.GoogleLogout,{clientId:D,buttonText:"Logout",onLogoutSuccess:this.logout,onFailure:this.handleLogoutFailure}):r.a.createElement(R.GoogleLogin,{clientId:D,buttonText:"Sign in with Google",onSuccess:this.login,onFailure:this.handleLoginFailure,cookiePolicy:"single_host_origin",responseType:"code,token"}))}}]),n}(a.Component),w=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={isLoggedIn:!1},e.login=function(t){e.setState({isLoggedIn:t})},e.render=function(){var t=document.body;return t&&(t.style.backgroundColor=e.props.editorDarkMode?"#181A1B":"#FFF"),r.a.createElement("div",null,r.a.createElement(N.Hero,{color:"black",bg:"white",backgroundImage:"https://source.unsplash.com/npxXWgQ33ZQ/1600x900"},r.a.createElement(N.Section,{heading:"YADA",subhead:"Yet Another Docs App",width:1},e.state.isLoggedIn&&r.a.createElement(N.CallToAction,{id:"edit",href:"#/edit"},"Get Started"),r.a.createElement(A,{login:e.login,isLoggedIn:e.state.isLoggedIn}))))},e}return n}(r.a.Component),j=Object(l.b)((function(e){return{isLoggedIn:e.editorDarkMode}}))(w),P=n(81),K=n.n(P),M=n(162),$=n(46),C=n.n($),G=n(83),J=n(87),U="https://yaas.azurewebsites.net/";var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8e3,a=new AbortController,r=Object(J.a)(Object(J.a)({},t),{},{signal:a.signal});setTimeout((function(){a.abort()}),n);return fetch(e,r).then((function(e){if(!e.ok)throw new Error("".concat(e.status,": ").concat(e.statusText));return e})).catch((function(e){if("AbortError"===e.name)throw new Error("Response timed out");throw new Error(e.message)}))};function X(){return(X=Object(G.a)(C.a.mark((function e(t){var n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(U+"query?docID="+t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",JSON.stringify(a));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(G.a)(C.a.mark((function e(t,n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(U+"document?docID="+n,{method:"PUT",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json"})});case 2:e.sent,alert("Document Saved Successfully");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={defaultJSON:null,serverRunning:!0},e.handleEditorChange=Object(M.debounce)((function(t){e.props.editorReadOnly||localStorage.setItem("file_"+e.props.fileNameKey,t())}),250),e.render=function(){if(null==e.state.defaultJSON)return r.a.createElement("div",null,"Loading...");console.log("Actual Editor");var t=document.body;return t&&(t.style.backgroundColor=e.props.editorDarkMode?"#181A1B":"#FFF"),e.state.serverRunning?r.a.createElement(K.a,{readOnly:e.props.editorReadOnly,dark:e.props.editorDarkMode,key:e.props.fileNameKey,defaultJSON:e.state.defaultJSON,tagFilters:e.props.tagFiltersExpr,onSave:function(e){return H(e.doc.toJSON(),1)}}):r.a.createElement(K.a,{readOnly:e.props.editorReadOnly,dark:e.props.editorDarkMode,key:e.props.fileNameKey,defaultValue:localStorage.getItem("file_"+e.props.fileNameKey)||"",tagFilters:e.props.tagFiltersExpr,onChange:e.handleEditorChange})},e}return Object(L.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e){return X.apply(this,arguments)})(1).then((function(t){return e.setState({defaultJSON:t})})).catch((function(){e.setState({defaultJSON:"",serverRunning:!1})}))}}]),n}(r.a.Component),W=Object(l.b)((function(e){return{editorDarkMode:e.editorDarkMode,editorReadOnly:e.editorReadOnly,fileNameKey:e.fileNameKey,tagFiltersExpr:e.tagFilters.expr}}))(V),Q=n(163),q=n(13),z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null),r.a.createElement(W,null))},Z=function(){return r.a.createElement(Q.a,{basename:"/yada"},r.a.createElement("div",null,r.a.createElement(q.a,{exact:!0,path:"/",component:j}),r.a.createElement(q.a,{exact:!0,path:"/edit",component:z})),r.a.createElement("footer",null,"\xa9 2020 FYDP-SAAC"))},ee=n(164),te=n(25),ne="editorReadOnly",ae="editorDarkMode",re=Object(ee.a)({reducer:Object(te.c)({editorDarkMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Dark"===localStorage.getItem(ae),t=arguments.length>1?arguments[1]:void 0;return t.type===d.type?!e:e},editorReadOnly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ReadOnly"===localStorage.getItem(ne),t=arguments.length>1?arguments[1]:void 0;return t.type===u.type?!e:e},fileNameKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("initialFileName")||"notes",t=arguments.length>1?arguments[1]:void 0;return t.type!==p?e:t.fileNameKey},tagFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:I,expr:v},t=arguments.length>1?arguments[1]:void 0;return t.type!==m?e:t.tagFilters}})});re.subscribe((function(){localStorage.setItem(ae,re.getState().editorDarkMode?"Dark":"Light"),localStorage.setItem(ne,re.getState().editorReadOnly?"ReadOnly":"Editable"),localStorage.setItem("initialFileName",re.getState().fileNameKey),localStorage.setItem("initialTagFilters",re.getState().tagFilters.text||"")}));var oe=re;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:oe},r.a.createElement(Z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[165,1,2]]]);
//# sourceMappingURL=main.4df158e8.chunk.js.map